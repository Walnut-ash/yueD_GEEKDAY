{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/lib/storage.ts"],"sourcesContent":["import type { Restaurant, RestaurantList } from \"@/types/restaurant\"\n\nconst STORAGE_KEY = \"restaurant-lists\"\n\nexport function getLists(): RestaurantList[] {\n  if (typeof window === \"undefined\") return []\n  const data = localStorage.getItem(STORAGE_KEY)\n  return data ? JSON.parse(data) : []\n}\n\nexport function saveLists(lists: RestaurantList[]) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(lists))\n}\n\nexport function createList(name: string): RestaurantList {\n  const lists = getLists()\n  const newList: RestaurantList = {\n    id: crypto.randomUUID(),\n    name,\n    restaurants: [],\n    createdAt: new Date().toISOString(),\n    shareCode: generateShareCode(),\n  }\n  lists.push(newList)\n  saveLists(lists)\n  return newList\n}\n\nexport function addRestaurant(listId: string, restaurant: Omit<Restaurant, \"id\" | \"createdAt\">) {\n  const lists = getLists()\n  const list = lists.find((l) => l.id === listId)\n  if (list) {\n    list.restaurants.push({\n      ...restaurant,\n      id: crypto.randomUUID(),\n      createdAt: new Date().toISOString(),\n    })\n    saveLists(lists)\n  }\n  return lists\n}\n\nexport function updateRestaurant(listId: string, restaurantId: string, updates: Partial<Restaurant>) {\n  const lists = getLists()\n  const list = lists.find((l) => l.id === listId)\n  if (list) {\n    const restaurant = list.restaurants.find((r) => r.id === restaurantId)\n    if (restaurant) {\n      Object.assign(restaurant, updates)\n      saveLists(lists)\n    }\n  }\n  return lists\n}\n\nexport function deleteRestaurant(listId: string, restaurantId: string) {\n  const lists = getLists()\n  const list = lists.find((l) => l.id === listId)\n  if (list) {\n    list.restaurants = list.restaurants.filter((r) => r.id !== restaurantId)\n    saveLists(lists)\n  }\n  return lists\n}\n\nexport function deleteList(listId: string) {\n  const lists = getLists().filter((l) => l.id !== listId)\n  saveLists(lists)\n  return lists\n}\n\nfunction generateShareCode(): string {\n  return Math.random().toString(36).substring(2, 8).toUpperCase()\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAEA,MAAM,cAAc;AAEb,SAAS;IACd,wCAAmC,OAAO,EAAE;;;IAC5C,MAAM;AAER;AAEO,SAAS,UAAU,KAAuB;IAC/C,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;AACnD;AAEO,SAAS,WAAW,IAAY;IACrC,MAAM,QAAQ;IACd,MAAM,UAA0B;QAC9B,IAAI,OAAO,UAAU;QACrB;QACA,aAAa,EAAE;QACf,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW;IACb;IACA,MAAM,IAAI,CAAC;IACX,UAAU;IACV,OAAO;AACT;AAEO,SAAS,cAAc,MAAc,EAAE,UAAgD;IAC5F,MAAM,QAAQ;IACd,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACxC,IAAI,MAAM;QACR,KAAK,WAAW,CAAC,IAAI,CAAC;YACpB,GAAG,UAAU;YACb,IAAI,OAAO,UAAU;YACrB,WAAW,IAAI,OAAO,WAAW;QACnC;QACA,UAAU;IACZ;IACA,OAAO;AACT;AAEO,SAAS,iBAAiB,MAAc,EAAE,YAAoB,EAAE,OAA4B;IACjG,MAAM,QAAQ;IACd,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACxC,IAAI,MAAM;QACR,MAAM,aAAa,KAAK,WAAW,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QACzD,IAAI,YAAY;YACd,OAAO,MAAM,CAAC,YAAY;YAC1B,UAAU;QACZ;IACF;IACA,OAAO;AACT;AAEO,SAAS,iBAAiB,MAAc,EAAE,YAAoB;IACnE,MAAM,QAAQ;IACd,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IACxC,IAAI,MAAM;QACR,KAAK,WAAW,GAAG,KAAK,WAAW,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;QAC3D,UAAU;IACZ;IACA,OAAO;AACT;AAEO,SAAS,WAAW,MAAc;IACvC,MAAM,QAAQ,WAAW,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAChD,UAAU;IACV,OAAO;AACT;AAEA,SAAS;IACP,OAAO,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,WAAW;AAC/D"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,mLAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,oLAAI,GAAG;IAE9B,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/mobile-map-view.tsx"],"sourcesContent":["\n\"use client\"\n\nimport { useState, useMemo, useEffect, useRef, useCallback } from \"react\"\nimport Script from \"next/script\"\nimport type { Restaurant, RestaurantList } from \"@/types/restaurant\"\nimport { Clock, Star, X, Navigation, Search, ChevronDown, Crosshair, MapPin, Loader2 } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { useToast } from \"@/hooks/use-toast\"\n\ninterface MobileMapViewProps {\n  restaurants: Restaurant[]\n  onToggleExclude: (id: string) => void\n  lists: RestaurantList[]\n  currentListId: string | null\n  onSelectList: (id: string) => void\n}\n\n/* Map a restaurant's tags to a food emoji */\nfunction getTagEmoji(tags: string[]): string {\n  const joined = tags.join(\",\")\n  if (joined.includes(\"火锅\")) return \"\\uD83C\\uDF72\"\n  if (joined.includes(\"川菜\") || joined.includes(\"辣\")) return \"\\uD83C\\uDF36\\uFE0F\"\n  if (joined.includes(\"粤菜\") || joined.includes(\"点心\")) return \"\\uD83E\\uDD5F\"\n  if (joined.includes(\"日料\") || joined.includes(\"寿司\")) return \"\\uD83C\\uDF63\"\n  if (joined.includes(\"西北\") || joined.includes(\"面食\")) return \"\\uD83C\\uDF5C\"\n  if (joined.includes(\"烧烤\") || joined.includes(\"串\")) return \"\\uD83C\\uDF56\"\n  if (joined.includes(\"小吃\")) return \"\\uD83E\\uDD68\"\n  if (joined.includes(\"北京\")) return \"\\uD83E\\uDD6E\"\n  if (joined.includes(\"龙虾\") || joined.includes(\"海鲜\")) return \"\\uD83E\\uDD90\"\n  if (joined.includes(\"台湾\")) return \"\\uD83E\\uDD5F\"\n  if (joined.includes(\"创意\")) return \"\\uD83C\\uDF74\"\n  if (joined.includes(\"家常\")) return \"\\uD83C\\uDF73\"\n  return \"\\uD83C\\uDF74\"\n}\n\nconst CATEGORIES = [\n  { id: \"all\", label: \"全部\", emoji: \"\\uD83C\\uDF7D\\uFE0F\" },\n  { id: \"火锅\", label: \"火锅\", emoji: \"\\uD83C\\uDF72\" },\n  { id: \"川菜\", label: \"川菜\", emoji: \"\\uD83C\\uDF36\\uFE0F\" },\n  { id: \"粤菜\", label: \"粤菜\", emoji: \"\\uD83E\\uDD5F\" },\n  { id: \"日料\", label: \"日料\", emoji: \"\\uD83C\\uDF63\" },\n  { id: \"西北菜\", label: \"西北\", emoji: \"\\uD83C\\uDF5C\" },\n  { id: \"小吃\", label: \"小吃\", emoji: \"\\uD83E\\uDD68\" },\n  { id: \"烧烤\", label: \"烧烤\", emoji: \"\\uD83C\\uDF56\" },\n  { id: \"海鲜\", label: \"海鲜\", emoji: \"\\uD83E\\uDD90\" },\n  { id: \"家常\", label: \"家常\", emoji: \"\\uD83C\\uDF73\" },\n  { id: \"创意\", label: \"创意\", emoji: \"\\uD83C\\uDF74\" },\n]\n\nexport function MobileMapView({\n  restaurants,\n  onToggleExclude,\n  lists,\n  currentListId,\n  onSelectList,\n}: MobileMapViewProps) {\n  const [selectedRestaurant, setSelectedRestaurant] = useState<Restaurant | null>(null)\n  const [activeCategory, setActiveCategory] = useState(\"all\")\n  const [showListDropdown, setShowListDropdown] = useState(false)\n  const [showSearch, setShowSearch] = useState(false)\n  const [searchText, setSearchText] = useState(\"\")\n  const [mapStatus, setMapStatus] = useState<\"loading\" | \"ready\" | \"error\">(\"loading\")\n  const [mapError, setMapError] = useState<string>(\"\")\n  const [isLocating, setIsLocating] = useState(false)\n  const mapRef = useRef<any>(null)\n  const amapRef = useRef<any>(null)\n  const markersRef = useRef<any[]>([])\n  const userMarkerRef = useRef<any>(null)\n  \n  const mapContainerRef = useRef<HTMLDivElement>(null)\n  const chipScrollRef = useRef<HTMLDivElement>(null)\n  const chipRefs = useRef<Map<string, HTMLButtonElement>>(new Map())\n\n  // Scroll selected chip to center of the scroll container\n  const scrollChipToCenter = useCallback((chipId: string) => {\n    const container = chipScrollRef.current\n    const chip = chipRefs.current.get(chipId)\n    if (!container || !chip) return\n\n    const containerRect = container.getBoundingClientRect()\n    const chipRect = chip.getBoundingClientRect()\n\n    const chipCenter = chipRect.left + chipRect.width / 2 - containerRect.left\n    const containerCenter = containerRect.width / 2\n\n    const scrollTarget = container.scrollLeft + chipCenter - containerCenter\n\n    container.scrollTo({\n      left: scrollTarget,\n      behavior: \"smooth\",\n    })\n  }, [])\n\n  const currentList = lists.find((l) => l.id === currentListId)\n  const currentListName = currentList?.name || \"我的收藏\"\n\n  const displayedRestaurants = useMemo(() => {\n    let filtered = restaurants\n    if (activeCategory !== \"all\") {\n      filtered = filtered.filter((r) => r.tags.some((t) => t.includes(activeCategory)))\n    }\n    if (searchText.trim()) {\n      const s = searchText.toLowerCase()\n      filtered = filtered.filter(\n        (r) => r.name.toLowerCase().includes(s) || r.tags.some((t) => t.includes(s))\n      )\n    }\n    return filtered\n  }, [restaurants, activeCategory, searchText])\n\n  const { toast } = useToast()\n\n  // Initialize AMap using Script tag approach with onLoad callback\n  const initMap = useCallback(() => {\n    if (typeof window === \"undefined\" || !(window as any).AMap || !mapContainerRef.current || mapRef.current) return\n\n    try {\n      // @ts-ignore\n    const AMap = (window as any).AMap\n    amapRef.current = AMap\n\n    const map = new AMap.Map(mapContainerRef.current, {\n      viewMode: \"2D\",\n      zoom: 13,\n      center: [116.16147, 23.30324], // Puning City center\n    })\n\n    // @ts-ignore\n    mapRef.current = map\n\n    // Ensure user marker is cleared on init\n    userMarkerRef.current = null\n\n    map.plugin([\"AMap.Scale\", \"AMap.ToolBar\"], function () {\n        map.addControl(new AMap.Scale())\n        map.addControl(new AMap.ToolBar({ position: \"RB\" }))\n      })\n\n      // Force resize to ensure map renders correctly\n      setTimeout(() => {\n        map.resize()\n        map.setFitView(null, false, [50, 50, 50, 50])\n      }, 500)\n\n      setMapStatus(\"ready\")\n    } catch (e) {\n      console.error(\"Map init error:\", e)\n      setMapStatus(\"error\")\n      setMapError(String(e))\n    }\n  }, [])\n\n  const locateUser = useCallback(() => {\n    const map = mapRef.current\n    const AMap = amapRef.current\n    if (!map || !AMap || isLocating) return\n\n    setIsLocating(true)\n\n    map.plugin(\"AMap.Geolocation\", function () {\n      const geolocation = new AMap.Geolocation({\n        enableHighAccuracy: true,\n        timeout: 10000,\n        zoomToAccuracy: false, // Don't auto zoom too much\n        position: 'RB',\n        showMarker: false, // Use custom marker instead\n        showCircle: true,\n        panToLocation: true,\n      })\n      \n      geolocation.getCurrentPosition(function(status: string, result: any) {\n        setIsLocating(false)\n        if(status === 'complete'){\n            console.log('Located successfully', result)\n            \n            // 1. Add custom pulse marker\n            if (userMarkerRef.current) {\n                map.remove(userMarkerRef.current)\n            }\n            \n            const content = `\n                <div class=\"user-location-marker\">\n                    <div class=\"user-location-pulse\"></div>\n                    <div class=\"user-location-dot\"></div>\n                </div>\n            `\n            \n            const marker = new AMap.Marker({\n                position: result.position,\n                content: content,\n                offset: new AMap.Pixel(-24, -24), // Center the 48x48 marker\n                zIndex: 100 // Ensure it's above other markers\n            })\n            \n            map.add(marker)\n            userMarkerRef.current = marker\n\n            // Calculate distance to nearest restaurant\n            let nearestDist = Infinity\n            let nearbyCount = 0\n            const userPos = result.position // AMap.LngLat\n            \n            // Check if we have restaurants\n            if (markersRef.current && markersRef.current.length > 0) {\n              markersRef.current.forEach(marker => {\n                const markerPos = marker.getPosition()\n                const dist = userPos.distance(markerPos) // meters\n                if (dist < nearestDist) nearestDist = dist\n                if (dist < 10000) nearbyCount++ // within 10km\n              })\n\n              let description = \"已获取您的精确位置。\"\n              if (nearbyCount > 0) {\n                description += ` 附近 10km 内有 ${nearbyCount} 家收藏餐厅。`\n              } else {\n                description += ` 附近暂无收藏餐厅（最近的在 ${(nearestDist / 1000).toFixed(1)}km 外）。`\n              }\n\n              // Always center on user location with appropriate zoom\n              // Zoom 11 is roughly 10km view range\n              setTimeout(() => {\n                 map.setZoomAndCenter(11, result.position)\n              }, 100)\n\n              toast({\n                title: \"定位成功\",\n                description: description,\n              })\n            } else {\n               // No restaurants case\n               setTimeout(() => {\n                 map.setZoomAndCenter(11, result.position)\n               }, 100)\n               \n               toast({\n                title: \"定位成功\",\n                description: \"已获取您的精确位置，但当前没有展示的餐厅。\",\n              })\n            }\n\n        } else {\n            console.error('Location failed', status, result)\n            \n            let errorMsg = '未知错误'\n            if (result.message) errorMsg = result.message\n            else if (typeof result === 'string') errorMsg = result\n\n            // 如果是 HTTPS 问题，提示更明确\n            if (typeof window !== 'undefined' && window.location.protocol !== 'https:' && window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {\n                errorMsg += \" (非HTTPS环境无法精确定位)\"\n            }\n            \n            toast({\n              variant: \"destructive\",\n              title: \"无法获取精确位置\",\n              description: `原因：${errorMsg}。尝试切换到城市定位。`,\n            })\n            \n            // Fallback to City Location immediately on any error\n            console.log('Attempting fallback to CitySearch...')\n            map.plugin(\"AMap.CitySearch\", function () {\n                const citySearch = new AMap.CitySearch()\n                citySearch.getLocalCity(function (status: string, result: any) {\n                  if (status === 'complete' && result.info === 'OK') {\n                    if (result && result.city && result.bounds) {\n                      const citybounds = result.bounds\n                      map.setBounds(citybounds)\n                      console.log('Fallback to city:', result.city)\n                      toast({\n                        title: `已定位到：${result.city}`,\n                        description: \"由于精确位置获取失败，仅显示城市范围。\",\n                      })\n                    }\n                  } else {\n                      console.error('City fallback failed', result)\n                      toast({\n                        variant: \"destructive\",\n                        title: \"定位完全失败\",\n                        description: \"无法获取位置信息，请检查网络或权限。\",\n                      })\n                  }\n                })\n            })\n        }\n      })\n    })\n  }, [toast])\n\n  // Auto locate when map is ready\n  useEffect(() => {\n    if (mapStatus === 'ready') {\n      // Small delay to ensure map is fully rendered\n      setTimeout(() => {\n        locateUser()\n      }, 500)\n    }\n  }, [mapStatus, locateUser])\n\n  useEffect(() => {\n    // If AMap is already loaded (from previous navigation), init immediately\n    if ((window as any).AMap) {\n      initMap()\n    }\n\n    // Cleanup\n    return () => {\n      if (mapRef.current) {\n        mapRef.current.destroy()\n        mapRef.current = null\n      }\n    }\n  }, [initMap])\n\n  // Update markers when restaurants change\n  useEffect(() => {\n    const map = mapRef.current\n    const AMap = amapRef.current\n    if (!map || !AMap) return\n\n    // Clear existing markers\n    if (markersRef.current.length > 0) {\n      try {\n        map.remove(markersRef.current)\n      } catch {\n      }\n      markersRef.current = []\n    }\n    \n    // Don't clear user marker here!\n\n    const newMarkers: any[] = []\n\n    displayedRestaurants.forEach((restaurant) => {\n      const emoji = getTagEmoji(restaurant.tags)\n      \n      // Create custom content marker\n      const content = `\n        <div class=\"custom-marker\" style=\"\n          background-color: white;\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          box-shadow: 0 2px 6px rgba(0,0,0,0.2);\n          border: 2px solid ${restaurant.id === selectedRestaurant?.id ? '#f97316' : '#fff'};\n          transform: ${restaurant.id === selectedRestaurant?.id ? 'scale(1.2)' : 'scale(1)'};\n          transition: all 0.2s;\n        \">\n          <span style=\"font-size: 20px;\">${emoji}</span>\n        </div>\n      `\n\n      const marker = new AMap.Marker({\n        position: [restaurant.lng, restaurant.lat],\n        content: content,\n        offset: new AMap.Pixel(-18, -18),\n        extData: { id: restaurant.id }\n      })\n\n      marker.on('click', () => {\n        setSelectedRestaurant(restaurant)\n        // Center map on click\n        map.setZoomAndCenter(15, [restaurant.lng, restaurant.lat])\n      })\n\n      newMarkers.push(marker)\n    })\n\n    if (newMarkers.length > 0) {\n      map.add(newMarkers)\n      markersRef.current = newMarkers\n      // Fit view to show all markers\n      map.setFitView(newMarkers, false, [50, 50, 50, 50])\n    }\n\n  }, [displayedRestaurants, selectedRestaurant])\n\n  // Search nearby functionality removed\n\n\n  return (\n    <div className=\"relative h-full w-full overflow-hidden bg-[#f6f7f9]\">\n      {/* Inject security config immediately to ensure it runs before AMap loads */}\n      <script\n        dangerouslySetInnerHTML={{\n          __html: `window._AMapSecurityConfig = { securityJsCode: \"${process.env.NEXT_PUBLIC_AMAP_SECURITY_JS_CODE}\" };`,\n        }}\n      />\n      <Script\n        src={`https://webapi.amap.com/maps?v=2.0&key=${process.env.NEXT_PUBLIC_AMAP_KEY}`}\n        strategy=\"afterInteractive\"\n        onLoad={initMap}\n      />\n      <style jsx global>{`\n        .amap-logo, .amap-copyright {\n           display: none !important;\n        }\n        \n        @keyframes pulse-ring {\n          0% {\n            width: 16px;\n            height: 16px;\n            opacity: 0.8;\n          }\n          100% {\n            width: 48px;\n            height: 48px;\n            opacity: 0;\n          }\n        }\n        \n        .user-location-marker {\n          position: relative;\n          width: 48px;\n          height: 48px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        .user-location-dot {\n          width: 16px;\n          height: 16px;\n          background-color: #3b82f6;\n          border: 3px solid white;\n          border-radius: 50%;\n          z-index: 2;\n          box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);\n        }\n        \n        .user-location-pulse {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          background-color: rgba(59, 130, 246, 0.4);\n          border-radius: 50%;\n          animation: pulse-ring 2s infinite cubic-bezier(0.215, 0.61, 0.355, 1);\n          z-index: 1;\n        }\n      `}</style>\n      \n      {/* Map Container */}\n      <div \n        ref={mapContainerRef} \n        className=\"absolute inset-0 z-0 bg-gray-200\" \n        style={{ minHeight: '100%', minWidth: '100%' }}\n      />\n\n      {mapStatus !== \"ready\" && (\n        <div className=\"absolute inset-0 z-10 flex items-center justify-center bg-[#f6f7f9]\">\n          <div className=\"text-center px-8\">\n            <div className=\"mx-auto w-12 h-12 rounded-full bg-background shadow-sm border border-border/30 flex items-center justify-center\">\n              <MapPin className=\"w-6 h-6 text-foreground/60\" />\n            </div>\n            <p className=\"mt-3 text-sm font-medium text-foreground/80\">\n              {mapStatus === \"loading\" ? \"地图加载中...\" : \"地图加载失败\"}\n            </p>\n            {mapStatus === \"error\" && (\n              <p className=\"mt-1 text-xs text-muted-foreground break-all\">{mapError}</p>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* ====== Floating header ====== */}\n      <div className=\"absolute top-0 left-0 right-0 z-20 pointer-events-none\">\n        {/* Title row */}\n        <div className=\"px-5 pt-4 pb-1 flex items-start justify-between pointer-events-auto\">\n          <div className=\"relative\">\n            {/* Collection name dropdown trigger */}\n            <button\n              onClick={(e) => {\n                e.stopPropagation()\n                setShowListDropdown(!showListDropdown)\n              }}\n              className=\"flex items-center gap-1 active:opacity-70 transition-opacity bg-background/80 backdrop-blur-md px-3 py-1.5 rounded-full shadow-sm\"\n            >\n              <h1 className=\"text-[18px] font-bold tracking-tight text-foreground\">\n                {currentListName}\n              </h1>\n              <ChevronDown\n                className={`w-4 h-4 text-foreground/50 transition-transform duration-200 ${showListDropdown ? \"rotate-180\" : \"\"}`}\n              />\n            </button>\n            <p className=\"text-xs text-muted-foreground mt-1 ml-1 bg-background/50 inline-block px-1 rounded\">\n              {displayedRestaurants.length} 家收藏餐厅\n            </p>\n\n            {/* Collection dropdown */}\n            {showListDropdown && (\n              <div\n                className=\"absolute top-full left-0 mt-2 w-56 bg-background rounded-2xl shadow-xl border border-border/50 overflow-hidden z-50 animate-in fade-in slide-in-from-top-2 duration-200\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <div className=\"py-1 max-h-64 overflow-y-auto\">\n                  {lists.map((list) => {\n                    const isActive = list.id === currentListId\n                    return (\n                      <button\n                        key={list.id}\n                        onClick={() => {\n                          onSelectList(list.id)\n                          setShowListDropdown(false)\n                        }}\n                        className={`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${\n                          isActive ? \"bg-primary/8\" : \"active:bg-muted/60\"\n                        }`}\n                      >\n                        <span className=\"text-lg\">{\"\\uD83D\\uDCC2\"}</span>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className={`text-sm truncate ${isActive ? \"font-semibold text-primary\" : \"text-foreground\"}`}>\n                            {list.name}\n                          </p>\n                          <p className=\"text-[11px] text-muted-foreground\">{list.restaurants.length} 家餐厅</p>\n                        </div>\n                        {isActive && (\n                          <div className=\"w-2 h-2 rounded-full bg-primary shrink-0\" />\n                        )}\n                      </button>\n                    )\n                  })}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Search button */}\n          <button\n            onClick={(e) => {\n              e.stopPropagation()\n              setShowSearch(!showSearch)\n              setShowListDropdown(false)\n            }}\n            className=\"w-10 h-10 rounded-full bg-background shadow-sm border border-border/30 flex items-center justify-center active:scale-95 transition-transform\"\n          >\n            <Search className=\"w-[18px] h-[18px] text-foreground/60\" />\n          </button>\n        </div>\n\n        {/* Search bar */}\n        {showSearch && (\n          <div className=\"px-5 pb-2 pointer-events-auto animate-in slide-in-from-top-2 duration-200\">\n            <div className=\"flex items-center gap-2 bg-background rounded-full px-4 py-2.5 shadow-sm border border-border/30\">\n              <Search className=\"w-4 h-4 text-muted-foreground shrink-0\" />\n              <input\n                autoFocus\n                value={searchText}\n                onChange={(e) => setSearchText(e.target.value)}\n                placeholder=\"搜索餐厅名称...\"\n                className=\"flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground/50\"\n                onClick={(e) => e.stopPropagation()}\n              />\n              {searchText && (\n                <button onClick={() => setSearchText(\"\")} className=\"p-0.5\">\n                  <X className=\"w-3.5 h-3.5 text-muted-foreground\" />\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Category chips - swipeable with snap & auto-center */}\n        <div\n          ref={chipScrollRef}\n          className=\"overflow-x-auto pb-3 pt-1 pointer-events-auto\"\n          style={{\n            WebkitOverflowScrolling: \"touch\",\n            scrollbarWidth: \"none\",\n            msOverflowStyle: \"none\",\n            scrollSnapType: \"x proximity\",\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <style>{`\n            .chip-scroll::-webkit-scrollbar { display: none; }\n          `}</style>\n          <div\n            className=\"chip-scroll flex items-center gap-2.5\"\n            style={{ paddingLeft: 20, paddingRight: 20 }}\n          >\n            {CATEGORIES.map((cat) => {\n              const isActive = activeCategory === cat.id\n              return (\n                <button\n                  key={cat.id}\n                  ref={(el) => {\n                    if (el) chipRefs.current.set(cat.id, el)\n                    else chipRefs.current.delete(cat.id)\n                  }}\n                  onClick={() => {\n                    setActiveCategory(cat.id)\n                    scrollChipToCenter(cat.id)\n                  }}\n                  style={{ scrollSnapAlign: \"center\" }}\n                  className={`flex items-center gap-1.5 px-4 py-2 rounded-full text-[13px] whitespace-nowrap shrink-0 transition-all duration-250 border ${\n                    isActive\n                      ? \"bg-foreground text-background font-semibold shadow-md border-foreground scale-105\"\n                      : \"bg-background/90 text-foreground/70 font-medium shadow-sm border-border/30 active:scale-[0.96]\"\n                  }`}\n                >\n                  <span className=\"text-[15px] leading-none\">{cat.emoji}</span>\n                  <span>{cat.label}</span>\n                </button>\n              )\n            })}\n          </div>\n        </div>\n      </div>\n\n\n\n      {/* Locate button */}\n      <button\n        className=\"absolute right-4 z-10 w-10 h-10 rounded-full bg-background shadow-md border border-border/30 flex items-center justify-center active:scale-95 transition-transform\"\n        style={{ bottom: selectedRestaurant ? 260 : 100 }}\n        onClick={locateUser}\n        disabled={isLocating}\n      >\n        {isLocating ? (\n          <Loader2 className=\"w-[18px] h-[18px] text-primary animate-spin\" />\n        ) : (\n          <Crosshair className=\"w-[18px] h-[18px] text-foreground/50\" />\n        )}\n      </button>\n\n      {/* ====== Bottom detail card ====== */}\n      {selectedRestaurant && (\n        <div className=\"absolute bottom-20 left-0 right-0 z-30 p-3 animate-in slide-in-from-bottom-4 duration-300\">\n          <div className=\"bg-background rounded-2xl shadow-xl overflow-hidden border border-border/30\">\n            <div className=\"flex\">\n              <div className=\"w-24 h-24 flex-shrink-0\">\n                <img\n                  src={\n                    selectedRestaurant.imageUrl ||\n                    `/placeholder.svg?height=96&width=96&query=${encodeURIComponent(selectedRestaurant.name)}`\n                  }\n                  alt={selectedRestaurant.name}\n                  className=\"w-full h-full object-cover rounded-l-2xl\"\n                />\n              </div>\n\n              <div className=\"flex-1 p-3 min-w-0\">\n                <div className=\"flex items-start justify-between gap-1\">\n                  <h3 className=\"font-semibold text-sm truncate\">{selectedRestaurant.name}</h3>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation()\n                      setSelectedRestaurant(null)\n                    }}\n                    className=\"p-0.5 -mr-1 -mt-0.5 text-muted-foreground/50\"\n                  >\n                    <X className=\"w-3.5 h-3.5\" />\n                  </button>\n                </div>\n\n                {selectedRestaurant.tags.length > 0 && (\n                  <div className=\"flex gap-1 mt-1 flex-wrap\">\n                    {selectedRestaurant.tags.slice(0, 3).map((tag) => (\n                      <span\n                        key={tag}\n                        className=\"px-1.5 py-0.5 text-[10px] rounded-full bg-primary/8 text-primary font-medium\"\n                      >\n                        {tag}\n                      </span>\n                    ))}\n                  </div>\n                )}\n\n                <div className=\"flex items-center gap-2 mt-1.5\">\n                  <span className=\"text-primary font-semibold text-xs\">¥{selectedRestaurant.avgPrice}/人</span>\n                  {selectedRestaurant.rating && (\n                    <span className=\"flex items-center gap-0.5 text-amber-500 text-[11px]\">\n                      <Star className=\"w-3 h-3 fill-current\" />\n                      {selectedRestaurant.rating}\n                    </span>\n                  )}\n                  <span className=\"flex items-center gap-0.5 text-muted-foreground text-[11px]\">\n                    <Clock className=\"w-3 h-3\" />\n                    {selectedRestaurant.openTime}-{selectedRestaurant.closeTime}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2 px-3 pb-3 pt-1\">\n              <Button\n                variant={selectedRestaurant.excluded ? \"default\" : \"outline\"}\n                size=\"sm\"\n                className=\"flex-1 h-8 text-xs rounded-xl\"\n                onClick={(e) => {\n                  e.stopPropagation()\n                  onToggleExclude(selectedRestaurant.id)\n                }}\n              >\n                {selectedRestaurant.excluded ? \"恢复\" : \"排除\"}\n              </Button>\n              <Button size=\"sm\" className=\"flex-1 h-8 text-xs rounded-xl\">\n                <Navigation className=\"w-3.5 h-3.5 mr-1\" />\n                导航\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Empty state */}\n      {displayedRestaurants.length === 0 && (\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n          <div className=\"text-center bg-background rounded-2xl p-8 shadow-sm border border-border/20 z-10\">\n            <p className=\"font-medium text-foreground/70\">没有找到餐厅</p>\n            <p className=\"text-sm text-muted-foreground mt-1\">\n              {activeCategory !== \"all\" ? \"试试切换其他分类\" : \"点击底部添加你想去的餐厅\"}\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1157, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,0PAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1182, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,mLAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,oLAAI,GAAG;IAE9B,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1228, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/slider.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SliderPrimitive from '@radix-ui/react-slider'\n\nimport { cn } from '@/lib/utils'\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max],\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        'relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col',\n        className,\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={\n          'bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5'\n        }\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={\n            'bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full'\n          }\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;IAClD,MAAM,UAAU,4NAAa,CAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACZ,eACA;YAAC;YAAK;SAAI,EAClB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,0PAAC,sLAAoB;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,IAAA,8HAAE,EACX,uOACA;QAED,GAAG,KAAK;;0BAET,0PAAC,uLAAqB;gBACpB,aAAU;gBACV,WACE;0BAGF,cAAA,0PAAC,uLAAqB;oBACpB,aAAU;oBACV,WACE;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,0PAAC,uLAAqB;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf"}},
    {"offset": {"line": 1298, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/mobile-restaurant-list.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useCallback } from \"react\"\nimport type { Restaurant, RestaurantList } from \"@/types/restaurant\"\nimport type { FilterOptions } from \"@/components/filter-panel\"\nimport { Input } from \"@/components/ui/input\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport {\n  Search,\n  SlidersHorizontal,\n  MapPin,\n  Clock,\n  Star,\n  X,\n  Check,\n  Utensils,\n  Plus,\n  FolderHeart,\n} from \"lucide-react\"\nimport { Slider } from \"@/components/ui/slider\"\n\ninterface MobileRestaurantListProps {\n  restaurants: Restaurant[]\n  allRestaurants: Restaurant[]\n  filters: FilterOptions\n  onFiltersChange: (filters: FilterOptions) => void\n  onToggleExclude: (id: string) => void\n  onDelete: (id: string) => void\n  lists: RestaurantList[]\n  currentListId: string | null\n  onSelectList: (id: string) => void\n  onCreateList: (name: string) => void\n}\n\nexport function MobileRestaurantList({\n  restaurants,\n  allRestaurants,\n  filters,\n  onFiltersChange,\n  onToggleExclude,\n  onDelete,\n  lists,\n  currentListId,\n  onSelectList,\n  onCreateList,\n}: MobileRestaurantListProps) {\n  const [showFilters, setShowFilters] = useState(false)\n  const [showNewList, setShowNewList] = useState(false)\n  const [newListName, setNewListName] = useState(\"\")\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const chipRefs = useRef<Map<string, HTMLButtonElement>>(new Map())\n\n  const scrollChipToCenter = useCallback((chipId: string) => {\n    const container = scrollRef.current\n    const chip = chipRefs.current.get(chipId)\n    if (!container || !chip) return\n\n    const containerRect = container.getBoundingClientRect()\n    const chipRect = chip.getBoundingClientRect()\n    const chipCenter = chipRect.left + chipRect.width / 2 - containerRect.left\n    const containerCenter = containerRect.width / 2\n    container.scrollTo({\n      left: container.scrollLeft + chipCenter - containerCenter,\n      behavior: \"smooth\",\n    })\n  }, [])\n\n  const allTags = Array.from(new Set(allRestaurants.flatMap((r) => r.tags)))\n\n  const handleCreateList = () => {\n    const name = newListName.trim()\n    if (!name) return\n    onCreateList(name)\n    setNewListName(\"\")\n    setShowNewList(false)\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Collection tabs - swipeable with snap & auto-center */}\n      <div className=\"flex-shrink-0 border-b bg-background/80 backdrop-blur-sm relative\">\n        <div className=\"flex items-center\">\n          <div\n            ref={scrollRef}\n            className=\"flex-1 overflow-x-auto\"\n            style={{\n              WebkitOverflowScrolling: \"touch\",\n              scrollbarWidth: \"none\",\n              msOverflowStyle: \"none\",\n              scrollSnapType: \"x proximity\",\n            }}\n          >\n            <style>{`.list-chip-scroll::-webkit-scrollbar { display: none; }`}</style>\n            <div\n              className=\"list-chip-scroll flex items-center gap-2.5\"\n              style={{ paddingLeft: 16, paddingRight: 8, paddingTop: 12, paddingBottom: 12 }}\n            >\n              {lists.map((list) => {\n                const isActive = list.id === currentListId\n                return (\n                  <button\n                    key={list.id}\n                    ref={(el) => {\n                      if (el) chipRefs.current.set(list.id, el)\n                      else chipRefs.current.delete(list.id)\n                    }}\n                    onClick={() => {\n                      onSelectList(list.id)\n                      scrollChipToCenter(list.id)\n                    }}\n                    style={{ scrollSnapAlign: \"center\" }}\n                    className={`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm whitespace-nowrap shrink-0 transition-all duration-250 border ${\n                      isActive\n                        ? \"bg-foreground text-background font-semibold shadow-md border-foreground scale-105\"\n                        : \"bg-background text-foreground/70 font-medium shadow-sm border-border/30 active:scale-[0.96]\"\n                    }`}\n                  >\n                    <FolderHeart className={`w-3.5 h-3.5 ${isActive ? \"fill-background/30\" : \"\"}`} />\n                    <span>{list.name}</span>\n                    <span\n                      className={`ml-0.5 text-xs px-1.5 py-0.5 rounded-full ${\n                        isActive\n                          ? \"bg-background/20 text-background\"\n                          : \"bg-muted text-muted-foreground\"\n                      }`}\n                    >\n                      {list.restaurants.length}\n                    </span>\n                  </button>\n                )\n              })}\n\n              {/* Inline new collection input */}\n              {showNewList && (\n                <div className=\"flex items-center gap-1.5 shrink-0\">\n                  <Input\n                    autoFocus\n                    value={newListName}\n                    onChange={(e) => setNewListName(e.target.value)}\n                    onKeyDown={(e) => {\n                      if (e.key === \"Enter\") handleCreateList()\n                      if (e.key === \"Escape\") {\n                        setShowNewList(false)\n                        setNewListName(\"\")\n                      }\n                    }}\n                    placeholder=\"收藏夹名称\"\n                    className=\"w-28 h-9 text-sm rounded-full\"\n                  />\n                  <Button\n                    size=\"sm\"\n                    onClick={handleCreateList}\n                    disabled={!newListName.trim()}\n                    className=\"h-9 rounded-full px-3\"\n                  >\n                    <Check className=\"w-3.5 h-3.5\" />\n                  </Button>\n                  <Button\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    onClick={() => {\n                      setShowNewList(false)\n                      setNewListName(\"\")\n                    }}\n                    className=\"h-9 w-9 rounded-full p-0\"\n                  >\n                    <X className=\"w-3.5 h-3.5\" />\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Fixed \"new\" button */}\n          {!showNewList && (\n            <div className=\"shrink-0 pr-4 pl-1 py-3 bg-gradient-to-l from-background via-background to-transparent\">\n              <button\n                onClick={() => {\n                  setShowNewList(true)\n                  setTimeout(() => {\n                    if (scrollRef.current) {\n                      scrollRef.current.scrollLeft = scrollRef.current.scrollWidth\n                    }\n                  }, 50)\n                }}\n                style={{ scrollSnapAlign: \"center\" }}\n                className=\"flex items-center gap-1 px-3 py-2 rounded-full text-sm text-muted-foreground border border-dashed border-muted-foreground/30 whitespace-nowrap shrink-0 active:border-foreground active:text-foreground transition-colors\"\n              >\n                <Plus className=\"w-3.5 h-3.5\" />\n                新建\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Search and filter */}\n      <div className=\"flex-shrink-0 px-4 pt-3 pb-2 space-y-2\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"搜索餐厅名称或地址\"\n              value={filters.searchText}\n              onChange={(e) =>\n                onFiltersChange({ ...filters, searchText: e.target.value })\n              }\n              className=\"pl-9 rounded-full\"\n            />\n          </div>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setShowFilters(!showFilters)}\n            className={`rounded-full shrink-0 bg-transparent ${showFilters ? \"border-foreground text-foreground\" : \"\"}`}\n          >\n            <SlidersHorizontal className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        <div className=\"flex items-center justify-between text-sm text-muted-foreground\">\n          <span>共 {restaurants.length} 家餐厅</span>\n          {(filters.tags.length > 0 || filters.searchText) && (\n            <button\n              onClick={() =>\n                onFiltersChange({\n                  priceRange: [0, 500],\n                  tags: [],\n                  searchText: \"\",\n                })\n              }\n              className=\"text-foreground font-medium\"\n            >\n              清除筛选\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Inline filter panel - constrained within mobile container */}\n      {showFilters && (\n        <div className=\"flex-shrink-0 border-b bg-muted/30\">\n          {/* Drag handle */}\n          <div className=\"flex justify-center pt-2 pb-1\">\n            <div className=\"w-8 h-1 rounded-full bg-border\" />\n          </div>\n\n          <div className=\"px-4 pb-4 space-y-4\">\n            {/* Price range */}\n            <div>\n              <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">\n                价格范围：¥{filters.priceRange[0]} - ¥{filters.priceRange[1]}\n              </label>\n              <Slider\n                value={filters.priceRange}\n                onValueChange={(value) =>\n                  onFiltersChange({\n                    ...filters,\n                    priceRange: value as [number, number],\n                  })\n                }\n                max={500}\n                step={10}\n              />\n            </div>\n\n            {/* Tags */}\n            <div>\n              <label className=\"text-xs font-medium text-muted-foreground mb-2 block\">\n                餐厅类型\n              </label>\n              <div className=\"flex flex-wrap gap-1.5\">\n                {allTags.map((tag) => (\n                  <button\n                    key={tag}\n                    onClick={() => {\n                      const newTags = filters.tags.includes(tag)\n                        ? filters.tags.filter((t) => t !== tag)\n                        : [...filters.tags, tag]\n                      onFiltersChange({ ...filters, tags: newTags })\n                    }}\n                    className={`px-3 py-1.5 rounded-full text-xs font-medium transition-all border ${\n                      filters.tags.includes(tag)\n                        ? \"bg-foreground text-background border-foreground\"\n                        : \"bg-background text-foreground/70 border-border/50 active:scale-95\"\n                    }`}\n                  >\n                    {tag}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Apply button */}\n            <Button\n              onClick={() => setShowFilters(false)}\n              className=\"w-full rounded-full\"\n              size=\"sm\"\n            >\n              完成\n            </Button>\n          </div>\n        </div>\n      )}\n\n      {/* Restaurant list */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {restaurants.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-muted-foreground p-8\">\n            <Utensils className=\"w-16 h-16 mb-4 opacity-30\" />\n            <p className=\"font-medium\">没有找到餐厅</p>\n            <p className=\"text-sm mt-1\">试试调整筛选条件或添加新餐厅</p>\n          </div>\n        ) : (\n          <div className=\"divide-y\">\n            {restaurants.map((restaurant) => (\n              <div\n                key={restaurant.id}\n                className={`flex gap-3 p-4 ${restaurant.excluded ? \"opacity-50\" : \"\"}`}\n              >\n                <div className=\"w-20 h-20 rounded-xl overflow-hidden flex-shrink-0 relative\">\n                  <img\n                    src={\n                      restaurant.imageUrl ||\n                      `/placeholder.svg?height=80&width=80&query=${encodeURIComponent(restaurant.name + \" food\")}`\n                    }\n                    alt={restaurant.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  {restaurant.excluded && (\n                    <div className=\"absolute inset-0 bg-background/70 flex items-center justify-center\">\n                      <span className=\"text-xs font-medium\">已排除</span>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-start justify-between gap-2\">\n                    <h3 className=\"font-semibold truncate\">\n                      {restaurant.name}\n                    </h3>\n                    <span className=\"text-primary font-semibold text-sm shrink-0\">\n                      ¥{restaurant.avgPrice}\n                    </span>\n                  </div>\n\n                  {restaurant.tags.length > 0 && (\n                    <div className=\"flex flex-wrap gap-1 mt-1.5\">\n                      {restaurant.tags.slice(0, 3).map((tag) => (\n                        <Badge\n                          key={tag}\n                          variant=\"secondary\"\n                          className=\"text-[10px] px-1.5 py-0.5 bg-primary/10 text-primary border-0\"\n                        >\n                          {tag}\n                        </Badge>\n                      ))}\n                      {restaurant.tags.length > 3 && (\n                        <span className=\"text-[10px] text-muted-foreground\">\n                          +{restaurant.tags.length - 3}\n                        </span>\n                      )}\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center gap-2 mt-1.5 text-xs text-muted-foreground\">\n                    <span className=\"flex items-center gap-0.5\">\n                      <MapPin className=\"w-3 h-3\" />\n                      <span className=\"truncate max-w-[120px]\">\n                        {restaurant.address}\n                      </span>\n                    </span>\n                    {restaurant.rating && (\n                      <span className=\"flex items-center gap-0.5 text-amber-500\">\n                        <Star className=\"w-3 h-3 fill-current\" />\n                        {restaurant.rating}\n                      </span>\n                    )}\n                  </div>\n\n                  <div className=\"flex items-center gap-1 mt-1 text-xs text-muted-foreground\">\n                    <Clock className=\"w-3 h-3\" />\n                    <span>\n                      {restaurant.openTime}-{restaurant.closeTime}\n                    </span>\n                  </div>\n\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <button\n                      onClick={() => onToggleExclude(restaurant.id)}\n                      className={`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${\n                        restaurant.excluded\n                          ? \"bg-primary text-primary-foreground\"\n                          : \"bg-muted text-muted-foreground\"\n                      }`}\n                    >\n                      {restaurant.excluded ? (\n                        <>\n                          <Check className=\"w-3 h-3\" />\n                          恢复\n                        </>\n                      ) : (\n                        <>\n                          <X className=\"w-3 h-3\" />\n                          排除\n                        </>\n                      )}\n                    </button>\n                    <button\n                      onClick={() => onDelete(restaurant.id)}\n                      className=\"px-2 py-1 rounded-full text-xs bg-destructive/10 text-destructive\"\n                    >\n                      删除\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2061, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/lib/parse-link.ts"],"sourcesContent":["// 模拟解析社交媒体链接获取餐厅信息\n// 在实际应用中，这里会调用豆包API进行智能识别\n\nexport interface ParsedRestaurant {\n  name: string\n  address: string\n  avgPrice: number\n  openTime: string\n  closeTime: string\n  dishes: string[]\n  tags: string[]\n  rating: number\n  lat: number\n  lng: number\n  source: string\n  sourceUrl: string\n  imageUrl: string\n}\n\nexport async function parseRestaurantLink(url: string): Promise<ParsedRestaurant | null> {\n  try {\n    const response = await fetch('/api/parse-xhs', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ url }),\n    })\n\n    if (!response.ok) {\n      throw new Error('Failed to parse link')\n    }\n\n    const data = await response.json()\n    return data\n  } catch (error) {\n    console.error('Parse link error:', error)\n    return null\n  }\n}\n"],"names":[],"mappings":"AAAA,mBAAmB;AACnB,0BAA0B;;;;;AAkBnB,eAAe,oBAAoB,GAAW;IACnD,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,kBAAkB;YAC7C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAI;QAC7B;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO;IACT;AACF"}},
    {"offset": {"line": 2092, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,0PAAC,qLAAmB;QAClB,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2119, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2143, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/tabs.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\n\nimport { cn } from '@/lib/utils'\n\nfunction Tabs({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\n  return (\n    <TabsPrimitive.Root\n      data-slot=\"tabs\"\n      className={cn('flex flex-col gap-2', className)}\n      {...props}\n    />\n  )\n}\n\nfunction TabsList({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\n  return (\n    <TabsPrimitive.List\n      data-slot=\"tabs-list\"\n      className={cn(\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsTrigger({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\n  return (\n    <TabsPrimitive.Trigger\n      data-slot=\"tabs-trigger\"\n      className={cn(\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction TabsContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\n  return (\n    <TabsPrimitive.Content\n      data-slot=\"tabs-content\"\n      className={cn('flex-1 outline-none', className)}\n      {...props}\n    />\n  )\n}\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,0PAAC,oLAAkB;QACjB,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,0PAAC,oLAAkB;QACjB,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,0PAAC,uLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,0PAAC,uLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2209, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/drawer.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { Drawer as DrawerPrimitive } from 'vaul'\n\nimport { cn } from '@/lib/utils'\n\nfunction Drawer({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) {\n  return <DrawerPrimitive.Root data-slot=\"drawer\" {...props} />\n}\n\nfunction DrawerTrigger({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {\n  return <DrawerPrimitive.Trigger data-slot=\"drawer-trigger\" {...props} />\n}\n\nfunction DrawerPortal({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {\n  return <DrawerPrimitive.Portal data-slot=\"drawer-portal\" {...props} />\n}\n\nfunction DrawerClose({\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Close>) {\n  return <DrawerPrimitive.Close data-slot=\"drawer-close\" {...props} />\n}\n\nfunction DrawerOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {\n  return (\n    <DrawerPrimitive.Overlay\n      data-slot=\"drawer-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerContent({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Content>) {\n  return (\n    <DrawerPortal data-slot=\"drawer-portal\">\n      <DrawerOverlay />\n      <DrawerPrimitive.Content\n        data-slot=\"drawer-content\"\n        className={cn(\n          'group/drawer-content bg-background fixed z-50 flex h-auto flex-col',\n          'data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b',\n          'data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t',\n          'data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm',\n          'data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm',\n          className,\n        )}\n        {...props}\n      >\n        <div className=\"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block\" />\n        {children}\n      </DrawerPrimitive.Content>\n    </DrawerPortal>\n  )\n}\n\nfunction DrawerHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"drawer-header\"\n      className={cn(\n        'flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"drawer-footer\"\n      className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Title>) {\n  return (\n    <DrawerPrimitive.Title\n      data-slot=\"drawer-title\"\n      className={cn('text-foreground font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DrawerDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Description>) {\n  return (\n    <DrawerPrimitive.Description\n      data-slot=\"drawer-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,0PAAC,4JAAe,CAAC,IAAI;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,0PAAC,4JAAe,CAAC,OAAO;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,0PAAC,4JAAe,CAAC,MAAM;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,0PAAC,4JAAe,CAAC,KAAK;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,0PAAC,4JAAe,CAAC,OAAO;QACtB,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,GAAG,OACkD;IACrD,qBACE,0PAAC;QAAa,aAAU;;0BACtB,0PAAC;;;;;0BACD,0PAAC,4JAAe,CAAC,OAAO;gBACtB,aAAU;gBACV,WAAW,IAAA,8HAAE,EACX,sEACA,kQACA,uRACA,+NACA,yNACA;gBAED,GAAG,KAAK;;kCAET,0PAAC;wBAAI,WAAU;;;;;;oBACd;;;;;;;;;;;;;AAIT;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,4LACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,0PAAC,4JAAe,CAAC,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,0PAAC,4JAAe,CAAC,WAAW;QAC1B,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2373, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/mobile-add-restaurant.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport type { Restaurant } from \"@/types/restaurant\"\nimport { parseRestaurantLink, type ParsedRestaurant } from \"@/lib/parse-link\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Button } from \"@/components/ui/button\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Link, Sparkles, PenLine, Loader2, Check, MapPin, Edit2, X, FolderHeart, ChevronDown } from \"lucide-react\"\nimport {\n  Drawer,\n  DrawerClose,\n  DrawerContent,\n  DrawerDescription,\n  DrawerFooter,\n  DrawerHeader,\n  DrawerTitle,\n} from \"@/components/ui/drawer\"\nimport type { RestaurantList } from \"@/types/restaurant\"\n\ninterface MobileAddRestaurantProps {\n  onAdd: (restaurant: Omit<Restaurant, \"id\" | \"createdAt\">, listId?: string) => void\n  lists: RestaurantList[]\n  currentListId: string | null\n}\n\nexport function MobileAddRestaurant({ onAdd, lists, currentListId }: MobileAddRestaurantProps) {\n  const [activeTab, setActiveTab] = useState(\"link\")\n  const [selectedListId, setSelectedListId] = useState<string>(currentListId || lists[0]?.id || \"\")\n  const [showListPicker, setShowListPicker] = useState(false)\n\n  // 链接解析\n  const [linkUrl, setLinkUrl] = useState(\"\")\n  const [parsing, setParsing] = useState(false)\n  const [parsedResult, setParsedResult] = useState<ParsedRestaurant | null>(null)\n  const [parseError, setParseError] = useState(\"\")\n\n  const [isEditing, setIsEditing] = useState(false)\n  const [editForm, setEditForm] = useState<ParsedRestaurant | null>(null)\n\n  // 手动输入\n  const [manualForm, setManualForm] = useState({\n    name: \"\",\n    address: \"\",\n    avgPrice: \"\",\n    openTime: \"10:00\",\n    closeTime: \"22:00\",\n    dishes: \"\",\n    tags: \"\",\n    imageUrl: \"\", // Add image url state\n  })\n  \n  const [geocoding, setGeocoding] = useState(false)\n  const [candidates, setCandidates] = useState<any[]>([])\n  const [showCandidateDrawer, setShowCandidateDrawer] = useState(false)\n\n  // Helper to fetch coordinates\n  const fetchCoordinates = async (address: string, multiple = false) => {\n    try {\n      let url = `/api/geocode?address=${encodeURIComponent(address)}&multiple=${multiple}`\n      \n      // Try to get current location to improve search relevance\n      if (typeof window !== 'undefined' && (window as any).AMap) {\n         // @ts-ignore\n         const AMap = (window as any).AMap\n         // We can't easily get AMap instance here if it's not passed down, \n         // but maybe we can use a simpler approach: use localStorage if available or just ask browser\n         // Actually, let's try to use browser geolocation API directly if we don't have AMap handy\n         // Or better, let's use a cached location if we have one.\n         \n         // For now, let's try standard navigator.geolocation\n         try {\n             const pos: any = await new Promise((resolve, reject) => {\n                 navigator.geolocation.getCurrentPosition(resolve, reject, { timeout: 2000 })\n             })\n             if (pos && pos.coords) {\n                 url += `&location=${pos.coords.longitude},${pos.coords.latitude}`\n             }\n         } catch (e) {\n             // Ignore location error\n         }\n      }\n\n      const res = await fetch(url)\n      const data = await res.json()\n      \n      if (multiple && data.candidates) {\n        return { candidates: data.candidates }\n      }\n\n      if (res.ok && data.lat && data.lng) {\n        return { \n          lat: data.lat, \n          lng: data.lng, \n          name: data.name, \n          address: data.formattedAddress,\n          imageUrl: data.imageUrl // Get image url\n        }\n      }\n    } catch (e) {\n      console.error(\"Geocoding failed\", e)\n    }\n    return null\n  }\n\n  const handleParseLink = async () => {\n    if (!linkUrl.trim()) return\n\n    setParsing(true)\n    setParseError(\"\")\n    setParsedResult(null)\n    setIsEditing(false)\n    setEditForm(null)\n\n    try {\n      const result = await parseRestaurantLink(linkUrl)\n      if (result) {\n        setParsedResult(result)\n      } else {\n        setParseError(\"无法识别该链接，请尝试手动输入\")\n      }\n    } catch {\n      setParseError(\"解析失败，请稍后重试\")\n    } finally {\n      setParsing(false)\n    }\n  }\n\n  const handleStartEdit = () => {\n    if (parsedResult) {\n      setEditForm({ ...parsedResult })\n      setIsEditing(true)\n    }\n  }\n\n  const handleCancelEdit = () => {\n    setIsEditing(false)\n    setEditForm(null)\n  }\n\n  const handleSaveAndAdd = async () => {\n    const dataToAdd = isEditing && editForm ? editForm : parsedResult\n    if (dataToAdd) {\n      let finalLat = dataToAdd.lat\n      let finalLng = dataToAdd.lng\n\n      // If address was edited or original geocoding failed (using default Puning coords), try to re-geocode\n      // Simple check: if we are in editing mode, assume address might have changed or user wants to retry\n      if (isEditing && editForm?.address) {\n         setGeocoding(true)\n         const coords = await fetchCoordinates(editForm.address)\n         if (coords) {\n           finalLat = coords.lat\n           finalLng = coords.lng\n         }\n         setGeocoding(false)\n      }\n\n      onAdd({\n        ...dataToAdd,\n        lat: finalLat,\n        lng: finalLng\n      }, selectedListId)\n      \n      setLinkUrl(\"\")\n      setParsedResult(null)\n      setIsEditing(false)\n      setEditForm(null)\n    }\n  }\n\n  const handleConfirmCandidate = (candidate: any) => {\n    setShowCandidateDrawer(false)\n    \n    // Merge candidate data with manual form\n    const finalName = candidate.name || manualForm.name\n    const finalAddress = candidate.formattedAddress || candidate.address || manualForm.address || \"未知地址\"\n    const finalImageUrl = candidate.imageUrl || manualForm.imageUrl\n    \n    onAdd({\n      name: finalName,\n      address: finalAddress,\n      lat: candidate.lat,\n      lng: candidate.lng,\n      avgPrice: Number(manualForm.avgPrice) || 50,\n      openTime: manualForm.openTime,\n      closeTime: manualForm.closeTime,\n      imageUrl: finalImageUrl,\n      dishes: manualForm.dishes\n        .split(/[,，]/)\n        .map((s) => s.trim())\n        .filter(Boolean),\n      tags: manualForm.tags\n        .split(/[,，]/)\n        .map((s) => s.trim())\n        .filter(Boolean),\n    }, selectedListId)\n\n    // Reset form\n    setManualForm({\n      name: \"\",\n      address: \"\",\n      avgPrice: \"\",\n      openTime: \"10:00\",\n      closeTime: \"22:00\",\n      dishes: \"\",\n      tags: \"\",\n      imageUrl: \"\",\n    })\n  }\n\n  const handleAddManual = async () => {\n    if (!manualForm.name) return \n\n    setGeocoding(true)\n    \n    // Use name + address for search\n    const searchStr = manualForm.address ? `${manualForm.address} ${manualForm.name}` : manualForm.name\n    \n    // Fetch multiple candidates for confirmation\n    const result = await fetchCoordinates(searchStr, true)\n    setGeocoding(false)\n    \n    if (result && result.candidates && result.candidates.length > 0) {\n      setCandidates(result.candidates)\n      setShowCandidateDrawer(true)\n      return\n    }\n\n    // Fallback if no candidates found (e.g. API error or really no result)\n    // Just add with default coords (or maybe show error? sticking to previous behavior for now but maybe a toast warning would be better)\n    // Since user wants \"confirmation\", if no result, maybe we should say \"No location found\"\n    // But for now let's just proceed to add as \"Unknown Location\" or default Puning.\n    \n    // Actually, let's show the drawer with a \"Manual Entry\" option if search fails?\n    // Or just alert.\n    alert(\"未找到相关餐厅位置信息，将使用默认坐标添加。\")\n\n    onAdd({\n      name: manualForm.name,\n      address: manualForm.address || \"未知地址\",\n      lat: 23.30324,\n      lng: 116.16147,\n      avgPrice: Number(manualForm.avgPrice) || 50,\n      openTime: manualForm.openTime,\n      closeTime: manualForm.closeTime,\n      imageUrl: manualForm.imageUrl,\n      dishes: manualForm.dishes\n        .split(/[,，]/)\n        .map((s) => s.trim())\n        .filter(Boolean),\n      tags: manualForm.tags\n        .split(/[,，]/)\n        .map((s) => s.trim())\n        .filter(Boolean),\n    }, selectedListId)\n    \n    setManualForm({\n      name: \"\",\n      address: \"\",\n      avgPrice: \"\",\n      openTime: \"10:00\",\n      closeTime: \"22:00\",\n      dishes: \"\",\n      tags: \"\",\n      imageUrl: \"\",\n    })\n  }\n\n  const updateEditField = (field: keyof ParsedRestaurant, value: string | number | string[]) => {\n    if (editForm) {\n      setEditForm({ ...editForm, [field]: value })\n    }\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* 头部 */}\n      <div className=\"flex-shrink-0 p-4 border-b space-y-3\">\n        <div>\n          <h1 className=\"text-xl font-bold\">添加餐厅</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">粘贴链接智能解析，或手动输入</p>\n        </div>\n\n        {/* Collection picker */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowListPicker(!showListPicker)}\n            className=\"flex items-center gap-2 w-full px-3 py-2.5 rounded-xl border bg-muted/40 transition-colors active:bg-muted\"\n          >\n            <FolderHeart className=\"w-4 h-4 text-primary shrink-0\" />\n            <span className=\"text-sm font-medium truncate flex-1 text-left\">\n              {lists.find((l) => l.id === selectedListId)?.name || \"选择收藏夹\"}\n            </span>\n            <ChevronDown className={`w-4 h-4 text-muted-foreground transition-transform ${showListPicker ? \"rotate-180\" : \"\"}`} />\n          </button>\n\n          {showListPicker && (\n            <div className=\"absolute top-full left-0 right-0 mt-1 z-20 rounded-xl border bg-card shadow-lg overflow-hidden\">\n              <div className=\"max-h-48 overflow-y-auto\">\n                {lists.map((list) => (\n                  <button\n                    key={list.id}\n                    onClick={() => {\n                      setSelectedListId(list.id)\n                      setShowListPicker(false)\n                    }}\n                    className={`flex items-center gap-2 w-full px-3 py-2.5 text-sm text-left transition-colors ${\n                      list.id === selectedListId\n                        ? \"bg-primary/10 text-primary font-medium\"\n                        : \"active:bg-muted\"\n                    }`}\n                  >\n                    <FolderHeart className={`w-4 h-4 shrink-0 ${list.id === selectedListId ? \"text-primary\" : \"text-muted-foreground\"}`} />\n                    <span className=\"flex-1 truncate\">{list.name}</span>\n                    <span className=\"text-xs text-muted-foreground\">{list.restaurants.length} 家</span>\n                    {list.id === selectedListId && <Check className=\"w-4 h-4 text-primary shrink-0\" />}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* 内容 */}\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"grid w-full grid-cols-2 mb-6\">\n            <TabsTrigger value=\"link\" className=\"gap-2\">\n              <Sparkles className=\"w-4 h-4\" />\n              智能解析\n            </TabsTrigger>\n            <TabsTrigger value=\"manual\" className=\"gap-2\">\n              <PenLine className=\"w-4 h-4\" />\n              手动输入\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"link\" className=\"space-y-4 mt-0\">\n            <div className=\"space-y-2\">\n              <Label>粘贴小红书/抖音链接</Label>\n              <div className=\"flex gap-2\">\n                <Input\n                  placeholder=\"https://www.xiaohongshu.com/...\"\n                  value={linkUrl}\n                  onChange={(e) => setLinkUrl(e.target.value)}\n                  className=\"flex-1\"\n                />\n                <Button onClick={handleParseLink} disabled={parsing || !linkUrl.trim()} size=\"icon\">\n                  {parsing ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Link className=\"w-4 h-4\" />}\n                </Button>\n              </div>\n              <p className=\"text-xs text-muted-foreground\">支持小红书、抖音分享链接，AI自动识别餐厅信息</p>\n            </div>\n\n            {parseError && (\n              <div className=\"p-3 rounded-xl bg-destructive/10 text-destructive text-sm\">{parseError}</div>\n            )}\n\n            {parsedResult && !isEditing && (\n              <div className=\"p-4 rounded-2xl border bg-muted/30 space-y-3\">\n                <div className=\"flex gap-3\">\n                  <img\n                    src={parsedResult.imageUrl || \"/placeholder.svg\"}\n                    alt={parsedResult.name}\n                    className=\"w-20 h-20 rounded-xl object-cover\"\n                  />\n                  <div className=\"flex-1 min-w-0\">\n                    <h4 className=\"font-semibold\">{parsedResult.name}</h4>\n                    <p className=\"text-sm text-muted-foreground truncate flex items-center gap-1 mt-1\">\n                      <MapPin className=\"w-3 h-3\" />\n                      {parsedResult.address}\n                    </p>\n                    <p className=\"text-sm mt-1\">\n                      <span className=\"text-primary font-semibold\">¥{parsedResult.avgPrice}/人</span>\n                      <span className=\"text-muted-foreground ml-2\">\n                        {parsedResult.openTime}-{parsedResult.closeTime}\n                      </span>\n                    </p>\n                  </div>\n                </div>\n                {parsedResult.dishes.length > 0 && (\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {parsedResult.dishes.map((dish) => (\n                      <span key={dish} className=\"px-2 py-1 bg-background rounded-lg text-xs\">\n                        {dish}\n                      </span>\n                    ))}\n                  </div>\n                )}\n                {parsedResult.tags.length > 0 && (\n                  <div className=\"flex flex-wrap gap-1.5\">\n                    {parsedResult.tags.map((tag) => (\n                      <span key={tag} className=\"px-2 py-1 bg-primary/10 text-primary rounded-lg text-xs\">\n                        #{tag}\n                      </span>\n                    ))}\n                  </div>\n                )}\n                <div className=\"flex gap-2\">\n                  <Button onClick={handleStartEdit} variant=\"outline\" className=\"flex-1 bg-transparent\">\n                    <Edit2 className=\"w-4 h-4 mr-2\" />\n                    编辑信息\n                  </Button>\n                  <Button onClick={handleSaveAndAdd} className=\"flex-1\">\n                    <Check className=\"w-4 h-4 mr-2\" />\n                    确认添加\n                  </Button>\n                </div>\n              </div>\n            )}\n\n            {parsedResult && isEditing && editForm && (\n              <div className=\"p-4 rounded-2xl border bg-muted/30 space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <h4 className=\"font-semibold flex items-center gap-2\">\n                    <Edit2 className=\"w-4 h-4\" />\n                    编辑餐厅信息\n                  </h4>\n                  <Button variant=\"ghost\" size=\"icon\" onClick={handleCancelEdit}>\n                    <X className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-name\">餐厅名称</Label>\n                  <Input\n                    id=\"edit-name\"\n                    value={editForm.name}\n                    onChange={(e) => updateEditField(\"name\", e.target.value)}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-address\">地址</Label>\n                  <Input\n                    id=\"edit-address\"\n                    value={editForm.address}\n                    onChange={(e) => updateEditField(\"address\", e.target.value)}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"edit-price\">人均价格</Label>\n                    <Input\n                      id=\"edit-price\"\n                      type=\"number\"\n                      value={editForm.avgPrice}\n                      onChange={(e) => updateEditField(\"avgPrice\", Number(e.target.value))}\n                    />\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label>营业时间</Label>\n                    <div className=\"flex items-center gap-1\">\n                      <Input\n                        type=\"time\"\n                        value={editForm.openTime}\n                        onChange={(e) => updateEditField(\"openTime\", e.target.value)}\n                        className=\"flex-1\"\n                      />\n                      <span className=\"text-muted-foreground text-xs\">-</span>\n                      <Input\n                        type=\"time\"\n                        value={editForm.closeTime}\n                        onChange={(e) => updateEditField(\"closeTime\", e.target.value)}\n                        className=\"flex-1\"\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-dishes\">推荐菜品</Label>\n                  <Textarea\n                    id=\"edit-dishes\"\n                    placeholder=\"用逗号分隔\"\n                    value={editForm.dishes.join(\"，\")}\n                    onChange={(e) =>\n                      updateEditField(\n                        \"dishes\",\n                        e.target.value\n                          .split(/[,，]/)\n                          .map((s) => s.trim())\n                          .filter(Boolean),\n                      )\n                    }\n                    rows={2}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"edit-tags\">标签</Label>\n                  <Input\n                    id=\"edit-tags\"\n                    placeholder=\"用逗号分隔\"\n                    value={editForm.tags.join(\"，\")}\n                    onChange={(e) =>\n                      updateEditField(\n                        \"tags\",\n                        e.target.value\n                          .split(/[,，]/)\n                          .map((s) => s.trim())\n                          .filter(Boolean),\n                      )\n                    }\n                  />\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <Button onClick={handleCancelEdit} variant=\"outline\" className=\"flex-1 bg-transparent\">\n                    取消\n                  </Button>\n                  <Button onClick={handleSaveAndAdd} className=\"flex-1\">\n                    <Check className=\"w-4 h-4 mr-2\" />\n                    保存并添加\n                  </Button>\n                </div>\n              </div>\n            )}\n\n            {!parsedResult && !parseError && (\n              <div className=\"text-center py-12 text-muted-foreground\">\n                <Sparkles className=\"w-16 h-16 mx-auto mb-4 opacity-30\" />\n                <p className=\"font-medium\">粘贴链接，智能识别</p>\n                <p className=\"text-sm mt-1\">支持小红书、抖音分享链接</p>\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"manual\" className=\"space-y-4 mt-0\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"name\">餐厅名称 *</Label>\n              <Input\n                id=\"name\"\n                placeholder=\"如：海底捞（朝阳大悦城店）\"\n                value={manualForm.name}\n                onChange={(e) => setManualForm((f) => ({ ...f, name: e.target.value }))}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"address\">地址</Label>\n              <Input\n                id=\"address\"\n                placeholder=\"如：北京市朝阳区朝阳北路101号（可选，自动搜索）\"\n                value={manualForm.address}\n                onChange={(e) => setManualForm((f) => ({ ...f, address: e.target.value }))}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"price\">人均价格</Label>\n                <Input\n                  id=\"price\"\n                  type=\"number\"\n                  placeholder=\"100\"\n                  value={manualForm.avgPrice}\n                  onChange={(e) => setManualForm((f) => ({ ...f, avgPrice: e.target.value }))}\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>营业时间</Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"time\"\n                    value={manualForm.openTime}\n                    onChange={(e) => setManualForm((f) => ({ ...f, openTime: e.target.value }))}\n                    className=\"flex-1\"\n                  />\n                  <span className=\"text-muted-foreground\">-</span>\n                  <Input\n                    type=\"time\"\n                    value={manualForm.closeTime}\n                    onChange={(e) => setManualForm((f) => ({ ...f, closeTime: e.target.value }))}\n                    className=\"flex-1\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"dishes\">推荐菜品</Label>\n              <Textarea\n                id=\"dishes\"\n                placeholder=\"用逗号分隔，如：番茄锅底，毛肚，虾滑\"\n                value={manualForm.dishes}\n                onChange={(e) => setManualForm((f) => ({ ...f, dishes: e.target.value }))}\n                rows={2}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"tags\">标签</Label>\n              <Input\n                id=\"tags\"\n                placeholder=\"用逗号分隔，如：火锅，川菜，聚餐\"\n                value={manualForm.tags}\n                onChange={(e) => setManualForm((f) => ({ ...f, tags: e.target.value }))}\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"imageUrl\">图片链接 (可选)</Label>\n              <Input\n                id=\"imageUrl\"\n                placeholder=\"输入图片URL，留空则尝试自动获取\"\n                value={manualForm.imageUrl}\n                onChange={(e) => setManualForm((f) => ({ ...f, imageUrl: e.target.value }))}\n              />\n            </div>\n\n            <Button onClick={handleAddManual} className=\"w-full\" disabled={!manualForm.name || geocoding}>\n              {geocoding ? <Loader2 className=\"w-4 h-4 animate-spin mr-2\" /> : null}\n              {geocoding ? \"正在搜索...\" : \"添加餐厅\"}\n            </Button>\n          </TabsContent>\n        </Tabs>\n      </div>\n      {/* Candidate Selection Drawer */}\n      <Drawer open={showCandidateDrawer} onOpenChange={setShowCandidateDrawer}>\n        <DrawerContent className=\"max-h-[85vh] max-w-[430px] mx-auto\">\n          <DrawerHeader>\n            <DrawerTitle>请确认餐厅位置</DrawerTitle>\n            <DrawerDescription>\n              找到以下相关地点，请选择正确的一项\n            </DrawerDescription>\n          </DrawerHeader>\n          <div className=\"p-4 overflow-y-auto space-y-3\">\n            {candidates.map((candidate, index) => (\n              <button\n                key={index}\n                onClick={() => handleConfirmCandidate(candidate)}\n                className=\"w-full flex items-start gap-3 p-3 rounded-xl border bg-card hover:bg-muted/50 transition-colors text-left\"\n              >\n                <div className=\"w-16 h-16 shrink-0 rounded-lg bg-muted overflow-hidden\">\n                  <img \n                    src={candidate.imageUrl || \"/placeholder.svg\"} \n                    alt={candidate.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h4 className=\"font-semibold text-sm\">{candidate.name}</h4>\n                  <p className=\"text-xs text-muted-foreground mt-1 line-clamp-2\">\n                    {candidate.formattedAddress || candidate.address}\n                  </p>\n                  {candidate.type && (\n                    <span className=\"inline-block mt-1.5 px-1.5 py-0.5 bg-primary/10 text-primary text-[10px] rounded-full\">\n                      {candidate.type.split(';')[0]}\n                    </span>\n                  )}\n                </div>\n                <div className=\"shrink-0 self-center\">\n                  <div className=\"w-6 h-6 rounded-full border border-primary/30 flex items-center justify-center\">\n                    <Check className=\"w-3 h-3 text-primary opacity-0 group-active:opacity-100\" />\n                  </div>\n                </div>\n              </button>\n            ))}\n            \n            {/* Option to use raw input if none match */}\n            <button\n              onClick={() => {\n                // Add using original input\n                handleConfirmCandidate({\n                    name: manualForm.name,\n                    address: manualForm.address || \"自定义位置\",\n                    lat: 23.30324,\n                    lng: 116.16147,\n                    imageUrl: manualForm.imageUrl\n                })\n              }}\n              className=\"w-full py-3 text-center text-sm text-muted-foreground hover:text-foreground transition-colors\"\n            >\n              以上都不是，直接添加\n            </button>\n          </div>\n          <DrawerFooter>\n            <DrawerClose asChild>\n              <Button variant=\"outline\">取消</Button>\n            </DrawerClose>\n          </DrawerFooter>\n        </DrawerContent>\n      </Drawer>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3828, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/d20.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { useEffect, useState, useRef } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface D20DiceProps {\n  result: number | null\n  rolling: boolean\n  onRollComplete?: () => void\n  className?: string\n}\n\nexport default function D20Dice({\n  result,\n  rolling,\n  onRollComplete,\n  className\n}: D20DiceProps) {\n  const [currentNumber, setCurrentNumber] = useState(1)\n  const [rotation, setRotation] = useState(0)\n  const [scale, setScale] = useState(1)\n  const requestRef = useRef<number>(0)\n  const startTimeRef = useRef<number>(0)\n  const previousRollingRef = useRef(false)\n\n  // Animation loop for rolling effect\n  const animate = (time: number) => {\n    if (!rolling) return\n\n    if (startTimeRef.current === 0) startTimeRef.current = time\n    const elapsed = time - startTimeRef.current\n\n    // Update number every 100ms\n    if (Math.floor(elapsed / 100) % 2 === 0) {\n      setCurrentNumber(Math.floor(Math.random() * 20) + 1)\n    }\n\n    // Rotate continuously\n    setRotation((prev) => (prev + 15) % 360)\n    \n    // Scale pulse\n    const pulse = Math.sin(elapsed / 100) * 0.1 + 1\n    setScale(pulse)\n\n    requestRef.current = requestAnimationFrame(animate)\n  }\n\n  useEffect(() => {\n    if (rolling) {\n      startTimeRef.current = 0\n      requestRef.current = requestAnimationFrame(animate)\n    } else {\n      cancelAnimationFrame(requestRef.current)\n      \n      // When rolling stops\n      if (previousRollingRef.current && !rolling) {\n        // Set final result\n        if (result !== null) {\n          setCurrentNumber(result)\n        }\n        \n        // Reset transform to stable state\n        setRotation(0)\n        setScale(1)\n        \n        // Trigger completion callback after a short delay for visual effect\n        if (onRollComplete) {\n          setTimeout(onRollComplete, 500)\n        }\n      }\n    }\n    \n    previousRollingRef.current = rolling\n    \n    return () => cancelAnimationFrame(requestRef.current)\n  }, [rolling, result, onRollComplete])\n\n  return (\n    <div className={cn(\"flex items-center justify-center w-full h-full\", className)}>\n      <div \n        className=\"relative w-48 h-48 transition-all duration-300 ease-out\"\n        style={{\n          transform: `rotate(${rotation}deg) scale(${scale})`\n        }}\n      >\n        {/* D20 SVG Shape */}\n        <svg \n          viewBox=\"0 0 100 100\" \n          className=\"w-full h-full drop-shadow-2xl\"\n          style={{ filter: \"drop-shadow(0 10px 15px rgba(79, 70, 229, 0.4))\" }}\n        >\n          {/* Outer Hexagon (Silhouette of Icosahedron) */}\n          <path\n            d=\"M50 5 L93.3 30 L93.3 80 L50 105 L6.7 80 L6.7 30 Z\"\n            fill=\"#4f46e5\" // Indigo 600\n            stroke=\"#312e81\" // Indigo 900\n            strokeWidth=\"2\"\n            className=\"transition-colors duration-300\"\n          />\n          \n          {/* Internal Edges to simulate 3D faces */}\n          <path\n            d=\"M50 5 L50 55 M50 55 L6.7 80 M50 55 L93.3 80 M6.7 30 L50 55 M93.3 30 L50 55\"\n            stroke=\"#4338ca\" // Indigo 700\n            strokeWidth=\"1\"\n            fill=\"none\"\n            opacity=\"0.6\"\n          />\n          \n          {/* Highlight/Shine */}\n          <path\n            d=\"M50 5 L93.3 30 L50 55 Z\"\n            fill=\"rgba(255,255,255,0.1)\"\n          />\n        </svg>\n\n        {/* Number Display */}\n        <div \n          className=\"absolute inset-0 flex items-center justify-center\"\n          style={{ \n            transform: `rotate(${-rotation}deg)` // Counter-rotate text to keep it upright-ish or let it spin? \n            // Actually keeping it spinning with the dice looks more realistic for \"rolling\"\n            // But for readability, maybe let it spin.\n            // Let's keep it spinning with the dice container.\n          }}\n        >\n          <span \n            className=\"text-5xl font-bold text-amber-400 font-mono tracking-tighter\"\n            style={{ \n              textShadow: \"2px 2px 0px rgba(0,0,0,0.5)\"\n            }}\n          >\n            {currentNumber}\n          </span>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYe,SAAS,QAAQ,EAC9B,MAAM,EACN,OAAO,EACP,cAAc,EACd,SAAS,EACI;IACb,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6NAAQ,EAAC;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,aAAa,IAAA,2NAAM,EAAS;IAClC,MAAM,eAAe,IAAA,2NAAM,EAAS;IACpC,MAAM,qBAAqB,IAAA,2NAAM,EAAC;IAElC,oCAAoC;IACpC,MAAM,UAAU,CAAC;QACf,IAAI,CAAC,SAAS;QAEd,IAAI,aAAa,OAAO,KAAK,GAAG,aAAa,OAAO,GAAG;QACvD,MAAM,UAAU,OAAO,aAAa,OAAO;QAE3C,4BAA4B;QAC5B,IAAI,KAAK,KAAK,CAAC,UAAU,OAAO,MAAM,GAAG;YACvC,iBAAiB,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;QACpD;QAEA,sBAAsB;QACtB,YAAY,CAAC,OAAS,CAAC,OAAO,EAAE,IAAI;QAEpC,cAAc;QACd,MAAM,QAAQ,KAAK,GAAG,CAAC,UAAU,OAAO,MAAM;QAC9C,SAAS;QAET,WAAW,OAAO,GAAG,sBAAsB;IAC7C;IAEA,IAAA,8NAAS,EAAC;QACR,IAAI,SAAS;YACX,aAAa,OAAO,GAAG;YACvB,WAAW,OAAO,GAAG,sBAAsB;QAC7C,OAAO;YACL,qBAAqB,WAAW,OAAO;YAEvC,qBAAqB;YACrB,IAAI,mBAAmB,OAAO,IAAI,CAAC,SAAS;gBAC1C,mBAAmB;gBACnB,IAAI,WAAW,MAAM;oBACnB,iBAAiB;gBACnB;gBAEA,kCAAkC;gBAClC,YAAY;gBACZ,SAAS;gBAET,oEAAoE;gBACpE,IAAI,gBAAgB;oBAClB,WAAW,gBAAgB;gBAC7B;YACF;QACF;QAEA,mBAAmB,OAAO,GAAG;QAE7B,OAAO,IAAM,qBAAqB,WAAW,OAAO;IACtD,GAAG;QAAC;QAAS;QAAQ;KAAe;IAEpC,qBACE,0PAAC;QAAI,WAAW,IAAA,8HAAE,EAAC,kDAAkD;kBACnE,cAAA,0PAAC;YACC,WAAU;YACV,OAAO;gBACL,WAAW,CAAC,OAAO,EAAE,SAAS,WAAW,EAAE,MAAM,CAAC,CAAC;YACrD;;8BAGA,0PAAC;oBACC,SAAQ;oBACR,WAAU;oBACV,OAAO;wBAAE,QAAQ;oBAAkD;;sCAGnE,0PAAC;4BACC,GAAE;4BACF,MAAK;4BACL,QAAO;4BACP,aAAY;4BACZ,WAAU;;;;;;sCAIZ,0PAAC;4BACC,GAAE;4BACF,QAAO;4BACP,aAAY;4BACZ,MAAK;4BACL,SAAQ;;;;;;sCAIV,0PAAC;4BACC,GAAE;4BACF,MAAK;;;;;;;;;;;;8BAKT,0PAAC;oBACC,WAAU;oBACV,OAAO;wBACL,WAAW,CAAC,OAAO,EAAE,CAAC,SAAS,IAAI,CAAC,CAAC,8DAA8D;oBAIrG;8BAEA,cAAA,0PAAC;wBACC,WAAU;wBACV,OAAO;4BACL,YAAY;wBACd;kCAEC;;;;;;;;;;;;;;;;;;;;;;AAMb"}},
    {"offset": {"line": 3978, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/mobile-random-picker.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport type { Restaurant } from \"@/types/restaurant\"\nimport { Button } from \"@/components/ui/button\"\nimport { Dices, MapPin, Clock, Star, PartyPopper, Navigation } from \"lucide-react\"\nimport confetti from \"canvas-confetti\"\nimport D20Dice from \"@/components/ui/d20\"\n\ninterface MobileRandomPickerProps {\n  restaurants: Restaurant[]\n}\n\nexport function MobileRandomPicker({ restaurants }: MobileRandomPickerProps) {\n  const [picking, setPicking] = useState(false)\n  const [result, setResult] = useState<Restaurant | null>(null)\n  \n  // Dice state\n  const [showDice, setShowDice] = useState(false)\n  const [diceRolling, setDiceRolling] = useState(false)\n  const [diceResult, setDiceResult] = useState<number | null>(null)\n\n  const availableRestaurants = restaurants.filter((r) => !r.excluded)\n\n  const handlePick = () => {\n    if (availableRestaurants.length === 0) return\n\n    setPicking(true)\n    setResult(null)\n    setShowDice(true)\n    setDiceRolling(true)\n    \n    // Determine result immediately but show it via animation\n    const finalIndex = Math.floor(Math.random() * availableRestaurants.length)\n    const randomDice = Math.floor(Math.random() * 20) + 1\n    \n    setDiceResult(randomDice)\n\n    // Roll for 1.5 seconds then land\n    setTimeout(() => {\n      setDiceRolling(false)\n    }, 1500)\n    \n    // Note: The rest of the logic moves to onRollComplete\n  }\n\n  const handleRollComplete = () => {\n    // Wait a bit to show the dice number\n    setTimeout(() => {\n      setShowDice(false)\n      \n      // Select the restaurant (we need to recalculate or store it? \n      // Better to store it. But for simplicity, let's just pick one deterministically or store it in ref/state.\n      // Actually, since we didn't store finalIndex, let's pick it again or store it.\n      // Re-picking is fine since it's random anyway.\n      const finalIndex = Math.floor(Math.random() * availableRestaurants.length)\n      setResult(availableRestaurants[finalIndex])\n      setPicking(false)\n\n      confetti({\n        particleCount: 100,\n        spread: 70,\n        origin: { y: 0.6 },\n      })\n    }, 800)\n  }\n\n  const currentRestaurant = result\n\n  return (\n    <div className=\"h-full flex flex-col bg-background relative\">\n      {/* Dice Overlay */}\n      {showDice && (\n        <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm animate-in fade-in\">\n          <div className=\"w-[300px] h-[300px] relative\">\n             <D20Dice \n               result={diceResult} \n               rolling={diceRolling} \n               onRollComplete={handleRollComplete} \n               className=\"w-full h-full\"\n             />\n             <p className=\"absolute bottom-[-40px] left-0 right-0 text-center text-primary font-bold text-xl animate-pulse\">\n               {diceRolling ? \"投掷中...\" : \" \"}\n             </p>\n          </div>\n        </div>\n      )}\n\n      {/* 头部 */}\n      <div className=\"flex-shrink-0 p-4 border-b text-center\">\n        <h1 className=\"text-xl font-bold\">到了饭点，吃哪家？</h1>\n        <p className=\"text-sm text-muted-foreground mt-1\">{availableRestaurants.length} 家餐厅待选</p>\n      </div>\n\n      {/* 内容 */}\n      <div className=\"flex-1 flex flex-col items-center justify-center p-6\">\n        {availableRestaurants.length === 0 ? (\n          <div className=\"text-center text-muted-foreground\">\n            <Dices className=\"w-20 h-20 mx-auto mb-4 opacity-30\" />\n            <p className=\"font-medium\">没有可选的餐厅</p>\n            <p className=\"text-sm mt-1\">请先添加餐厅或取消排除</p>\n          </div>\n        ) : (\n          <>\n            {/* 抽取卡片 */}\n            <div\n              className={`w-full max-w-sm rounded-3xl overflow-hidden transition-all duration-300 ${\n                result ? \"bg-primary/5 border-2 border-primary shadow-2xl\" : \"bg-muted/30 border-2 border-border\"\n              }`}\n            >\n              {currentRestaurant ? (\n                <div className=\"relative\">\n                  {result && (\n                    <div className=\"absolute top-4 right-4 z-10\">\n                      <PartyPopper className=\"w-8 h-8 text-primary animate-bounce\" />\n                    </div>\n                  )}\n\n                  {/* 图片 */}\n                  <div className=\"h-48 relative\">\n                    <img\n                      src={\n                        currentRestaurant.imageUrl ||\n                        `/placeholder.svg?height=200&width=400&query=${encodeURIComponent(currentRestaurant.name + \" restaurant\") || \"/placeholder.svg\"}`\n                      }\n                      alt={currentRestaurant.name}\n                      className={`w-full h-full object-cover transition-all ${picking ? \"blur-sm scale-105\" : \"\"}`}\n                    />\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-background/80 to-transparent\" />\n                  </div>\n\n                  {/* 信息 */}\n                  <div className=\"p-5 -mt-12 relative\">\n                    <h3 className={`font-bold text-2xl transition-all ${picking ? \"blur-sm\" : \"\"}`}>\n                      {currentRestaurant.name}\n                    </h3>\n\n                    <div className=\"flex items-center gap-3 mt-2 text-sm\">\n                      <span className=\"font-semibold text-primary text-lg\">¥{currentRestaurant.avgPrice}/人</span>\n                      {currentRestaurant.rating && (\n                        <span className=\"flex items-center gap-1 text-amber-500\">\n                          <Star className=\"w-4 h-4 fill-current\" />\n                          {currentRestaurant.rating}\n                        </span>\n                      )}\n                    </div>\n\n                    <div className=\"flex items-center gap-1.5 mt-2 text-sm text-muted-foreground\">\n                      <MapPin className=\"w-4 h-4\" />\n                      <span className=\"truncate\">{currentRestaurant.address}</span>\n                    </div>\n\n                    <div className=\"flex items-center gap-1.5 mt-1 text-sm text-muted-foreground\">\n                      <Clock className=\"w-4 h-4\" />\n                      <span>\n                        {currentRestaurant.openTime}-{currentRestaurant.closeTime}\n                      </span>\n                    </div>\n\n                    {result && currentRestaurant.dishes.length > 0 && (\n                      <div className=\"mt-4 pt-4 border-t\">\n                        <p className=\"text-sm text-muted-foreground mb-2\">推荐菜品</p>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {currentRestaurant.dishes.map((dish) => (\n                            <span key={dish} className=\"px-3 py-1.5 bg-muted rounded-full text-sm\">\n                              {dish}\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"p-12 text-center text-muted-foreground\">\n                  <Dices className=\"w-20 h-20 mx-auto mb-4 opacity-30\" />\n                  <p className=\"text-lg\">点击按钮开始抽取</p>\n                </div>\n              )}\n            </div>\n\n            {/* 操作按钮 */}\n            <div className=\"w-full max-w-sm mt-6 space-y-3\">\n              <Button onClick={handlePick} disabled={picking} className=\"w-full h-14 text-lg rounded-2xl\" size=\"lg\">\n                {picking ? (\n                  <>\n                    <div className=\"w-5 h-5 mr-2 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                    抽取中...\n                  </>\n                ) : result ? (\n                  <>\n                    <Dices className=\"w-5 h-5 mr-2\" />\n                    再抽一次\n                  </>\n                ) : (\n                  <>\n                    <Dices className=\"w-5 h-5 mr-2\" />\n                    开始抽取\n                  </>\n                )}\n              </Button>\n\n              {result && (\n                <Button variant=\"outline\" className=\"w-full h-12 rounded-2xl bg-transparent\">\n                  <Navigation className=\"w-4 h-4 mr-2\" />\n                  导航到 {result.name}\n                </Button>\n              )}\n            </div>\n\n            {result && (\n              <p className=\"text-center text-muted-foreground mt-4 animate-in fade-in\">\n                就决定是你了！去吃 <span className=\"text-primary font-semibold\">{result.name}</span> 吧！\n              </p>\n            )}\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAPA;;;;;;;AAaO,SAAS,mBAAmB,EAAE,WAAW,EAA2B;IACzE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,6NAAQ,EAAoB;IAExD,aAAa;IACb,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAC;IACzC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6NAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,6NAAQ,EAAgB;IAE5D,MAAM,uBAAuB,YAAY,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,QAAQ;IAElE,MAAM,aAAa;QACjB,IAAI,qBAAqB,MAAM,KAAK,GAAG;QAEvC,WAAW;QACX,UAAU;QACV,YAAY;QACZ,eAAe;QAEf,yDAAyD;QACzD,MAAM,aAAa,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,qBAAqB,MAAM;QACzE,MAAM,aAAa,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;QAEpD,cAAc;QAEd,iCAAiC;QACjC,WAAW;YACT,eAAe;QACjB,GAAG;IAEH,sDAAsD;IACxD;IAEA,MAAM,qBAAqB;QACzB,qCAAqC;QACrC,WAAW;YACT,YAAY;YAEZ,8DAA8D;YAC9D,0GAA0G;YAC1G,+EAA+E;YAC/E,+CAA+C;YAC/C,MAAM,aAAa,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,qBAAqB,MAAM;YACzE,UAAU,oBAAoB,CAAC,WAAW;YAC1C,WAAW;YAEX,IAAA,wLAAQ,EAAC;gBACP,eAAe;gBACf,QAAQ;gBACR,QAAQ;oBAAE,GAAG;gBAAI;YACnB;QACF,GAAG;IACL;IAEA,MAAM,oBAAoB;IAE1B,qBACE,0PAAC;QAAI,WAAU;;YAEZ,0BACC,0PAAC;gBAAI,WAAU;0BACb,cAAA,0PAAC;oBAAI,WAAU;;sCACZ,0PAAC,+IAAO;4BACN,QAAQ;4BACR,SAAS;4BACT,gBAAgB;4BAChB,WAAU;;;;;;sCAEZ,0PAAC;4BAAE,WAAU;sCACV,cAAc,WAAW;;;;;;;;;;;;;;;;;0BAOnC,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAClC,0PAAC;wBAAE,WAAU;;4BAAsC,qBAAqB,MAAM;4BAAC;;;;;;;;;;;;;0BAIjF,0PAAC;gBAAI,WAAU;0BACZ,qBAAqB,MAAM,KAAK,kBAC/B,0PAAC;oBAAI,WAAU;;sCACb,0PAAC,yNAAK;4BAAC,WAAU;;;;;;sCACjB,0PAAC;4BAAE,WAAU;sCAAc;;;;;;sCAC3B,0PAAC;4BAAE,WAAU;sCAAe;;;;;;;;;;;yCAG9B;;sCAEE,0PAAC;4BACC,WAAW,CAAC,wEAAwE,EAClF,SAAS,oDAAoD,sCAC7D;sCAED,kCACC,0PAAC;gCAAI,WAAU;;oCACZ,wBACC,0PAAC;wCAAI,WAAU;kDACb,cAAA,0PAAC,+OAAW;4CAAC,WAAU;;;;;;;;;;;kDAK3B,0PAAC;wCAAI,WAAU;;0DACb,0PAAC;gDACC,KACE,kBAAkB,QAAQ,IAC1B,CAAC,4CAA4C,EAAE,mBAAmB,kBAAkB,IAAI,GAAG,kBAAkB,oBAAoB;gDAEnI,KAAK,kBAAkB,IAAI;gDAC3B,WAAW,CAAC,0CAA0C,EAAE,UAAU,sBAAsB,IAAI;;;;;;0DAE9F,0PAAC;gDAAI,WAAU;;;;;;;;;;;;kDAIjB,0PAAC;wCAAI,WAAU;;0DACb,0PAAC;gDAAG,WAAW,CAAC,kCAAkC,EAAE,UAAU,YAAY,IAAI;0DAC3E,kBAAkB,IAAI;;;;;;0DAGzB,0PAAC;gDAAI,WAAU;;kEACb,0PAAC;wDAAK,WAAU;;4DAAqC;4DAAE,kBAAkB,QAAQ;4DAAC;;;;;;;oDACjF,kBAAkB,MAAM,kBACvB,0PAAC;wDAAK,WAAU;;0EACd,0PAAC,sNAAI;gEAAC,WAAU;;;;;;4DACf,kBAAkB,MAAM;;;;;;;;;;;;;0DAK/B,0PAAC;gDAAI,WAAU;;kEACb,0PAAC,gOAAM;wDAAC,WAAU;;;;;;kEAClB,0PAAC;wDAAK,WAAU;kEAAY,kBAAkB,OAAO;;;;;;;;;;;;0DAGvD,0PAAC;gDAAI,WAAU;;kEACb,0PAAC,yNAAK;wDAAC,WAAU;;;;;;kEACjB,0PAAC;;4DACE,kBAAkB,QAAQ;4DAAC;4DAAE,kBAAkB,SAAS;;;;;;;;;;;;;4CAI5D,UAAU,kBAAkB,MAAM,CAAC,MAAM,GAAG,mBAC3C,0PAAC;gDAAI,WAAU;;kEACb,0PAAC;wDAAE,WAAU;kEAAqC;;;;;;kEAClD,0PAAC;wDAAI,WAAU;kEACZ,kBAAkB,MAAM,CAAC,GAAG,CAAC,CAAC,qBAC7B,0PAAC;gEAAgB,WAAU;0EACxB;+DADQ;;;;;;;;;;;;;;;;;;;;;;;;;;;qDAUvB,0PAAC;gCAAI,WAAU;;kDACb,0PAAC,yNAAK;wCAAC,WAAU;;;;;;kDACjB,0PAAC;wCAAE,WAAU;kDAAU;;;;;;;;;;;;;;;;;sCAM7B,0PAAC;4BAAI,WAAU;;8CACb,0PAAC,iJAAM;oCAAC,SAAS;oCAAY,UAAU;oCAAS,WAAU;oCAAkC,MAAK;8CAC9F,wBACC;;0DACE,0PAAC;gDAAI,WAAU;;;;;;4CAAwF;;uDAGvG,uBACF;;0DACE,0PAAC,yNAAK;gDAAC,WAAU;;;;;;4CAAiB;;qEAIpC;;0DACE,0PAAC,yNAAK;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;;gCAMvC,wBACC,0PAAC,iJAAM;oCAAC,SAAQ;oCAAU,WAAU;;sDAClC,0PAAC,wOAAU;4CAAC,WAAU;;;;;;wCAAiB;wCAClC,OAAO,IAAI;;;;;;;;;;;;;wBAKrB,wBACC,0PAAC;4BAAE,WAAU;;gCAA4D;8CAC7D,0PAAC;oCAAK,WAAU;8CAA8B,OAAO,IAAI;;;;;;gCAAQ;;;;;;;;;;;;;;;;;;;;AAQ3F"}},
    {"offset": {"line": 4470, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,0PAAC,sLAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,0PAAC,yLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,0PAAC,wLAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,0PAAC,uLAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,0PAAC,yLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,0PAAC;QAAa,aAAU;;0BACtB,0PAAC;;;;;0BACD,0PAAC,yLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,8HAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,0PAAC,uLAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,0PAAC,qNAAK;;;;;0CACN,0PAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,8HAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,0PAAC,uLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,0PAAC,6LAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,8HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 4652, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/mobile-profile.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport type { RestaurantList } from \"@/types/restaurant\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\"\nimport { Utensils, Plus, Trash2, Share2, ChevronRight, FolderOpen, Copy, Check, Users } from \"lucide-react\"\nimport { useToast } from \"@/hooks/use-toast\"\n\ninterface MobileProfileProps {\n  lists: RestaurantList[]\n  currentListId: string | null\n  onSelectList: (id: string) => void\n  onCreateList: (name: string) => void\n  onDeleteList: (id: string) => void\n  currentList?: RestaurantList\n}\n\nexport function MobileProfile({\n  lists,\n  currentListId,\n  onSelectList,\n  onCreateList,\n  onDeleteList,\n  currentList,\n}: MobileProfileProps) {\n  const [newListName, setNewListName] = useState(\"\")\n  const [showNewListDialog, setShowNewListDialog] = useState(false)\n  const [copied, setCopied] = useState(false)\n  const { toast } = useToast()\n\n  const handleCreateList = () => {\n    if (newListName.trim()) {\n      onCreateList(newListName.trim())\n      setNewListName(\"\")\n      setShowNewListDialog(false)\n    }\n  }\n\n  const handleShare = async () => {\n    if (!currentList) return\n\n    // 构造分享链接，包含 listId\n    // 假设部署后的域名，或者使用当前 window.location.origin\n    const origin = typeof window !== 'undefined' ? window.location.origin : ''\n    const shareUrl = `${origin}?listId=${currentList.id}&action=join`\n    \n    try {\n      await navigator.clipboard.writeText(`来【饭点】和我一起编辑\"${currentList.name}\"吧！\\n点击链接加入：${shareUrl}`)\n      setCopied(true)\n      toast({\n        title: \"邀请链接已复制\",\n        description: \"快发给朋友一起编辑餐厅列表吧！\",\n      })\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      toast({\n        variant: \"destructive\",\n        title: \"复制失败\",\n        description: \"请手动复制链接\",\n      })\n    }\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* 头部 */}\n      <div className=\"flex-shrink-0 p-6 bg-gradient-to-br from-primary/10 to-primary/5\">\n        <div className=\"flex items-center gap-4\">\n          <div className=\"w-16 h-16 rounded-2xl overflow-hidden bg-background flex items-center justify-center shadow-sm border border-border\">\n            <img src=\"/logo.png\" alt=\"饭点\" className=\"w-12 h-12 object-contain\" />\n          </div>\n          <div>\n            <h1 className=\"text-xl font-bold\">饭点</h1>\n            <p className=\"text-sm text-muted-foreground\">再也不用翻聊天记录找餐厅了</p>\n          </div>\n        </div>\n      </div>\n\n      {/* 内容 */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {/* 当前列表分享 - 一起吃饭吧 */}\n        {currentList && (\n          <div className=\"p-4 border-b\">\n            <h2 className=\"text-sm font-medium text-muted-foreground mb-3\">一起吃饭吧</h2>\n            <div className=\"p-4 rounded-2xl bg-primary/5 border border-primary/10\">\n              <div className=\"flex items-center justify-between gap-3\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <h3 className=\"font-semibold text-lg\">{currentList.name}</h3>\n                    <span className=\"px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full font-medium\">\n                        协作模式\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground flex items-center gap-1\">\n                    <Users className=\"w-3.5 h-3.5\" />\n                    {currentList.restaurants.length} 家餐厅 · 多人协作中\n                  </p>\n                </div>\n                <Button \n                    className=\"shrink-0 shadow-sm bg-primary hover:bg-primary/90 text-primary-foreground rounded-full px-4\"\n                    onClick={handleShare}\n                >\n                  {copied ? (\n                    <>\n                      <Check className=\"w-4 h-4 mr-1.5\" />\n                      已复制\n                    </>\n                  ) : (\n                    <>\n                      <Share2 className=\"w-4 h-4 mr-1.5\" />\n                      邀请好友\n                    </>\n                  )}\n                </Button>\n              </div>\n              \n              <div className=\"mt-3 text-xs text-muted-foreground bg-background/50 p-2 rounded-lg border border-border/50\">\n                <p>点击“邀请好友”复制链接，发送给朋友即可加入此列表，共同编辑餐厅。</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* 收藏列表 */}\n        <div className=\"p-4\">\n          <div className=\"flex items-center justify-between mb-3\">\n            <h2 className=\"text-sm font-medium text-muted-foreground\">我的收藏列表</h2>\n            <Dialog open={showNewListDialog} onOpenChange={setShowNewListDialog}>\n              <DialogTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\">\n                  <Plus className=\"w-4 h-4 mr-1\" />\n                  新建\n                </Button>\n              </DialogTrigger>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>新建收藏列表</DialogTitle>\n                </DialogHeader>\n                <div className=\"space-y-4 pt-4\">\n                  <Input\n                    placeholder=\"输入列表名称，如：周末聚餐\"\n                    value={newListName}\n                    onChange={(e) => setNewListName(e.target.value)}\n                    onKeyDown={(e) => e.key === \"Enter\" && handleCreateList()}\n                  />\n                  <Button onClick={handleCreateList} className=\"w-full\" disabled={!newListName.trim()}>\n                    创建列表\n                  </Button>\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          <div className=\"space-y-2\">\n            {lists.map((list) => (\n              <div\n                key={list.id}\n                className={`flex items-center gap-3 p-4 rounded-2xl transition-colors ${\n                  list.id === currentListId\n                    ? \"bg-primary/10 border-2 border-primary\"\n                    : \"bg-muted/30 border-2 border-transparent\"\n                }`}\n              >\n                <button onClick={() => onSelectList(list.id)} className=\"flex-1 flex items-center gap-3 text-left\">\n                  <div\n                    className={`w-10 h-10 rounded-xl flex items-center justify-center ${\n                      list.id === currentListId\n                        ? \"bg-primary text-primary-foreground\"\n                        : \"bg-muted text-muted-foreground\"\n                    }`}\n                  >\n                    <FolderOpen className=\"w-5 h-5\" />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"font-medium truncate\">{list.name}</h3>\n                    <p className=\"text-xs text-muted-foreground\">{list.restaurants.length} 家餐厅</p>\n                  </div>\n                  <ChevronRight className=\"w-5 h-5 text-muted-foreground\" />\n                </button>\n\n                {lists.length > 1 && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"text-destructive hover:text-destructive shrink-0\"\n                    onClick={() => onDeleteList(list.id)}\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </Button>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* 关于 */}\n        <div className=\"p-4 border-t\">\n          <h2 className=\"text-sm font-medium text-muted-foreground mb-3\">关于</h2>\n          <div className=\"text-sm text-muted-foreground space-y-2\">\n            <p>解决朋友收藏了餐厅却转眼忘记的问题</p>\n            <p>再也不用翻阅聊天记录找餐厅了</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5165, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/mobile-ai-chat.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport type { Restaurant } from \"@/types/restaurant\"\nimport { ArrowLeft, Send, Sparkles, MapPin, Clock, Star } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { cn } from \"@/lib/utils\"\n\ninterface Message {\n  id: string\n  role: \"user\" | \"assistant\"\n  content: string\n  restaurants?: Restaurant[]\n}\n\ninterface MobileAIChatProps {\n  restaurants: Restaurant[]\n  onBack: () => void\n}\n\nexport function MobileAIChat({ restaurants, onBack }: MobileAIChatProps) {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: \"welcome\",\n      role: \"assistant\",\n      content:\n        \"你好！我是你的美食助手。告诉我你的需求，我来帮你从收藏的餐厅中找到最合适的选择。比如：\\n\\n- 今天想吃点辣的\\n- 预算 100 以内的聚餐\\n- 适合约会的安静餐厅\\n- 离我最近的深夜食堂\",\n    },\n  ])\n  const [input, setInput] = useState(\"\")\n  const [isLoading, setIsLoading] = useState(false)\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const inputRef = useRef<HTMLInputElement>(null)\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight\n    }\n  }, [messages])\n\n  const smartFilter = (query: string): { results: Restaurant[]; explanation: string } => {\n    const q = query.toLowerCase()\n    let filtered = restaurants.filter((r) => !r.excluded)\n    let explanation = \"\"\n\n    // Price-based filtering\n    if (q.includes(\"便宜\") || q.includes(\"实惠\") || q.includes(\"经济\")) {\n      filtered = filtered.filter((r) => r.avgPrice <= 80)\n      explanation = \"为你筛选了人均 80 元以下的实惠餐厅\"\n    } else if (q.includes(\"贵\") || q.includes(\"高档\") || q.includes(\"奢华\")) {\n      filtered = filtered.filter((r) => r.avgPrice >= 150)\n      explanation = \"为你筛选了高档餐厅\"\n    }\n\n    // Budget extraction\n    const budgetMatch = q.match(/(\\d+)\\s*(元|块|以内|以下)/)\n    if (budgetMatch) {\n      const budget = parseInt(budgetMatch[1])\n      filtered = filtered.filter((r) => r.avgPrice <= budget)\n      explanation = `为你筛选了人均 ${budget} 元以内的餐厅`\n    }\n\n    // Cuisine/tag based\n    const tagKeywords: Record<string, string[]> = {\n      \"辣\": [\"川菜\", \"湘菜\", \"火锅\", \"麻辣\"],\n      \"日料\": [\"日料\", \"日式\", \"寿司\", \"拉面\"],\n      \"火锅\": [\"火锅\"],\n      \"烧烤\": [\"烧烤\", \"BBQ\"],\n      \"面\": [\"面\", \"面食\", \"拉面\"],\n      \"约会\": [\"浪漫\", \"精致\", \"西餐\", \"日料\", \"法餐\"],\n      \"聚餐\": [\"火锅\", \"烧烤\", \"聚餐\", \"大排档\"],\n      \"深夜\": [\"深夜\", \"夜宵\", \"烧烤\", \"小龙虾\"],\n    }\n\n    for (const [keyword, tags] of Object.entries(tagKeywords)) {\n      if (q.includes(keyword)) {\n        const tagFiltered = filtered.filter(\n          (r) =>\n            r.tags.some((t) => tags.some((tag) => t.includes(tag))) ||\n            r.name.toLowerCase().includes(keyword) ||\n            r.dishes.some((d) => d.toLowerCase().includes(keyword))\n        )\n        if (tagFiltered.length > 0) {\n          filtered = tagFiltered\n          if (!explanation) explanation = `为你筛选了与「${keyword}」相关的餐厅`\n        }\n      }\n    }\n\n    // Late night filter\n    if (q.includes(\"深夜\") || q.includes(\"夜宵\") || q.includes(\"宵夜\")) {\n      const lateNight = filtered.filter((r) => {\n        const closeHour = parseInt(r.closeTime.split(\":\")[0])\n        return closeHour >= 22 || closeHour <= 4\n      })\n      if (lateNight.length > 0) {\n        filtered = lateNight\n        explanation = explanation || \"为你筛选了深夜还在营业的餐厅\"\n      }\n    }\n\n    if (!explanation) {\n      explanation = `根据「${query}」为你从 ${restaurants.length} 家餐厅中筛选了 ${filtered.length} 家`\n    }\n\n    return { results: filtered, explanation }\n  }\n\n  const handleSend = async () => {\n    if (!input.trim() || isLoading) return\n    const userMsg: Message = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: input.trim(),\n    }\n    setMessages((prev) => [...prev, userMsg])\n    setInput(\"\")\n    setIsLoading(true)\n\n    // Simulate AI processing delay\n    await new Promise((r) => setTimeout(r, 800 + Math.random() * 600))\n\n    const { results, explanation } = smartFilter(userMsg.content)\n\n    const aiMsg: Message = {\n      id: (Date.now() + 1).toString(),\n      role: \"assistant\",\n      content:\n        results.length > 0\n          ? `${explanation}，共找到 ${results.length} 家：`\n          : `抱歉，没有找到完全匹配「${userMsg.content}」的餐厅。试试换个描述？你的收藏里有 ${restaurants.length} 家餐厅等着你探索。`,\n      restaurants: results.length > 0 ? results.slice(0, 5) : undefined,\n    }\n    setMessages((prev) => [...prev, aiMsg])\n    setIsLoading(false)\n  }\n\n  const quickSuggestions = [\"想吃辣的\", \"100元以内聚餐\", \"适合约会\", \"深夜还开的店\"]\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"flex-shrink-0 flex items-center gap-3 px-4 py-3 border-b bg-background/80 backdrop-blur-xl\">\n        <button\n          onClick={onBack}\n          className=\"w-9 h-9 flex items-center justify-center rounded-full hover:bg-muted transition-colors\"\n        >\n          <ArrowLeft className=\"w-5 h-5\" />\n        </button>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center\">\n            <Sparkles className=\"w-4 h-4 text-primary-foreground\" />\n          </div>\n          <div>\n            <h1 className=\"text-sm font-semibold leading-tight\">美食AI助手</h1>\n            <p className=\"text-xs text-muted-foreground leading-tight\">\n              基于你的 {restaurants.length} 家收藏\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Messages */}\n      <div ref={scrollRef} className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((msg) => (\n          <div\n            key={msg.id}\n            className={cn(\"flex\", msg.role === \"user\" ? \"justify-end\" : \"justify-start\")}\n          >\n            <div\n              className={cn(\n                \"max-w-[85%] rounded-2xl px-4 py-3\",\n                msg.role === \"user\"\n                  ? \"bg-primary text-primary-foreground rounded-br-md\"\n                  : \"bg-muted text-foreground rounded-bl-md\"\n              )}\n            >\n              <p className=\"text-sm whitespace-pre-wrap leading-relaxed\">{msg.content}</p>\n\n              {/* Restaurant cards in AI response */}\n              {msg.restaurants && msg.restaurants.length > 0 && (\n                <div className=\"mt-3 space-y-2\">\n                  {msg.restaurants.map((r) => (\n                    <div\n                      key={r.id}\n                      className=\"rounded-xl bg-background/80 backdrop-blur border border-border/50 overflow-hidden\"\n                    >\n                      <div className=\"flex gap-3 p-3\">\n                        <img\n                          src={\n                            r.imageUrl ||\n                            `/placeholder.svg?height=60&width=60&query=${encodeURIComponent(r.name)}`\n                          }\n                          alt={r.name}\n                          className=\"w-14 h-14 rounded-lg object-cover flex-shrink-0\"\n                        />\n                        <div className=\"flex-1 min-w-0\">\n                          <h4 className=\"font-semibold text-sm truncate\">{r.name}</h4>\n                          <div className=\"flex items-center gap-2 mt-0.5\">\n                            <span className=\"text-xs font-medium text-primary\">\n                              ¥{r.avgPrice}/人\n                            </span>\n                            {r.rating && (\n                              <span className=\"flex items-center gap-0.5 text-xs text-amber-500\">\n                                <Star className=\"w-3 h-3 fill-current\" />\n                                {r.rating}\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"flex items-center gap-1 mt-1 text-xs text-muted-foreground\">\n                            <MapPin className=\"w-3 h-3 flex-shrink-0\" />\n                            <span className=\"truncate\">{r.address}</span>\n                          </div>\n                          <div className=\"flex items-center gap-1 mt-0.5 text-xs text-muted-foreground\">\n                            <Clock className=\"w-3 h-3 flex-shrink-0\" />\n                            <span>\n                              {r.openTime}-{r.closeTime}\n                            </span>\n                          </div>\n                          {r.tags.length > 0 && (\n                            <div className=\"flex gap-1 mt-1.5 flex-wrap\">\n                              {r.tags.slice(0, 3).map((tag) => (\n                                <span\n                                  key={tag}\n                                  className=\"px-1.5 py-0.5 text-[10px] rounded-full bg-primary/10 text-primary\"\n                                >\n                                  {tag}\n                                </span>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n\n        {isLoading && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-muted rounded-2xl rounded-bl-md px-4 py-3\">\n              <div className=\"flex gap-1.5\">\n                <div className=\"w-2 h-2 bg-muted-foreground/40 rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }} />\n                <div className=\"w-2 h-2 bg-muted-foreground/40 rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }} />\n                <div className=\"w-2 h-2 bg-muted-foreground/40 rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }} />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Quick suggestions when messages is just the welcome */}\n        {messages.length === 1 && (\n          <div className=\"flex flex-wrap gap-2 pt-2\">\n            {quickSuggestions.map((s) => (\n              <button\n                key={s}\n                onClick={() => {\n                  setInput(s)\n                  setTimeout(() => inputRef.current?.focus(), 50)\n                }}\n                className=\"px-3 py-2 rounded-full border border-border bg-background text-sm hover:bg-muted transition-colors\"\n              >\n                {s}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Input */}\n      <div className=\"flex-shrink-0 p-3 pb-2 border-t bg-background/80 backdrop-blur-xl\">\n        <div className=\"flex gap-2\">\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\n            placeholder=\"描述你想吃什么...\"\n            className=\"flex-1 px-4 py-3 rounded-2xl border border-input bg-background text-sm focus:outline-none focus:ring-2 focus:ring-primary/30\"\n            disabled={isLoading}\n          />\n          <Button\n            size=\"icon\"\n            onClick={handleSend}\n            disabled={!input.trim() || isLoading}\n            className=\"h-12 w-12 rounded-2xl flex-shrink-0\"\n          >\n            <Send className=\"w-5 h-5\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5732, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/components/dice-3d.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useCallback, useEffect, useMemo, Suspense } from \"react\"\nimport { Canvas, useFrame } from \"@react-three/fiber\"\nimport { Environment, Text } from \"@react-three/drei\"\nimport * as THREE from \"three\"\n\n/* ─── Compute face centers & orientations for number placement ─── */\nfunction useFaceData(radius: number) {\n  return useMemo(() => {\n    const geo = new THREE.IcosahedronGeometry(radius, 0)\n    const pos = geo.attributes.position\n    const faces: { center: THREE.Vector3; normal: THREE.Vector3; quaternion: THREE.Quaternion }[] = []\n\n    for (let i = 0; i < pos.count; i += 3) {\n      const a = new THREE.Vector3(pos.getX(i), pos.getY(i), pos.getZ(i))\n      const b = new THREE.Vector3(pos.getX(i + 1), pos.getY(i + 1), pos.getZ(i + 1))\n      const c = new THREE.Vector3(pos.getX(i + 2), pos.getY(i + 2), pos.getZ(i + 2))\n\n      const center = new THREE.Vector3().addVectors(a, b).add(c).divideScalar(3)\n      const normal = new THREE.Vector3()\n        .crossVectors(new THREE.Vector3().subVectors(b, a), new THREE.Vector3().subVectors(c, a))\n        .normalize()\n\n      // Ensure normal points outward\n      if (normal.dot(center) < 0) normal.negate()\n\n      // Build quaternion: rotate from (0, 0, 1) to the face normal\n      const quaternion = new THREE.Quaternion().setFromUnitVectors(\n        new THREE.Vector3(0, 0, 1),\n        normal\n      )\n\n      faces.push({ center, normal, quaternion })\n    }\n\n    geo.dispose()\n    return faces\n  }, [radius])\n}\n\n/* ─── Single face‑colored D20 mesh with numbers 1‑20 ─── */\nfunction D20Mesh({ rolling, radius = 1.4 }: { rolling: boolean; radius?: number }) {\n  const meshRef = useRef<THREE.Mesh>(null)\n  const groupRef = useRef<THREE.Group>(null)\n  const faces = useFaceData(radius)\n\n  // Color palette matching reference: deep purple / crimson-red / dark plum\n  const faceColors = [\n    \"#6B2D8B\", \"#A92234\", \"#3B1550\", \"#8C1C3C\", \"#5A2070\",\n    \"#C4384A\", \"#2E1040\", \"#9A2860\", \"#7B2D8B\", \"#B03040\",\n    \"#4A1860\", \"#A02848\", \"#6A2080\", \"#C03838\", \"#351248\",\n    \"#8A2050\", \"#5B2878\", \"#B83440\", \"#3E1555\", \"#A42840\",\n  ]\n\n  // Classic D20 number layout (opposite faces sum to 21)\n  const faceNumbers = [20, 1, 12, 9, 8, 13, 16, 5, 4, 17, 14, 7, 2, 19, 10, 11, 18, 3, 6, 15]\n\n  useEffect(() => {\n    if (!meshRef.current) return\n    const geo = new THREE.IcosahedronGeometry(radius, 0)\n\n    const colors = new Float32Array(geo.attributes.position.count * 3)\n    for (let i = 0; i < 20; i++) {\n      const color = new THREE.Color(faceColors[i % faceColors.length])\n      for (let j = 0; j < 3; j++) {\n        colors[(i * 3 + j) * 3] = color.r\n        colors[(i * 3 + j) * 3 + 1] = color.g\n        colors[(i * 3 + j) * 3 + 2] = color.b\n      }\n    }\n    geo.setAttribute(\"color\", new THREE.BufferAttribute(colors, 3))\n    meshRef.current.geometry = geo\n  }, [radius])\n\n  // Animation\n  const rollStart = useRef(0)\n  const isRolling = useRef(false)\n  const idleTime = useRef(0)\n\n  // Random target rotation for each roll so a different face ends up in front\n  const targetRotation = useRef(new THREE.Euler(0, 0, 0))\n  const spinBase = useRef(new THREE.Euler(0, 0, 0))\n\n  useEffect(() => {\n    if (rolling) {\n      rollStart.current = 0\n      isRolling.current = true\n\n      // Pick a random face (0-19) to land on by choosing one of the 20 face normals\n      // and computing the rotation needed to point that face toward the camera (0,0,1)\n      const faceIndex = Math.floor(Math.random() * 20)\n      const geo = new THREE.IcosahedronGeometry(radius, 0)\n      const pos = geo.attributes.position\n      const fi = faceIndex * 3\n      const a = new THREE.Vector3(pos.getX(fi), pos.getY(fi), pos.getZ(fi))\n      const b = new THREE.Vector3(pos.getX(fi + 1), pos.getY(fi + 1), pos.getZ(fi + 1))\n      const c = new THREE.Vector3(pos.getX(fi + 2), pos.getY(fi + 2), pos.getZ(fi + 2))\n      const normal = new THREE.Vector3()\n        .crossVectors(new THREE.Vector3().subVectors(b, a), new THREE.Vector3().subVectors(c, a))\n        .normalize()\n      const center = new THREE.Vector3().addVectors(a, b).add(c).divideScalar(3)\n      if (normal.dot(center) < 0) normal.negate()\n      geo.dispose()\n\n      // Quaternion to rotate this face's normal toward camera (0, 0, 1)\n      const q = new THREE.Quaternion().setFromUnitVectors(normal, new THREE.Vector3(0, 0, 1))\n      // Add extra full spins (multiple of 2*PI) so it looks dramatic\n      const extraSpins = 4 + Math.floor(Math.random() * 3) // 4-6 full spins\n      const finalEuler = new THREE.Euler().setFromQuaternion(q)\n      targetRotation.current = new THREE.Euler(\n        finalEuler.x + Math.PI * 2 * extraSpins * (Math.random() > 0.5 ? 1 : -1),\n        finalEuler.y + Math.PI * 2 * extraSpins * (Math.random() > 0.5 ? 1 : -1),\n        finalEuler.z + Math.PI * 2 * (1 + Math.floor(Math.random() * 2)) * (Math.random() > 0.5 ? 1 : -1),\n      )\n\n      // Save current rotation as spin base\n      if (groupRef.current) {\n        spinBase.current = groupRef.current.rotation.clone()\n      }\n    }\n  }, [rolling, radius])\n\n  useFrame((_, delta) => {\n    if (!groupRef.current) return\n\n    if (isRolling.current) {\n      rollStart.current += delta\n      const t = rollStart.current\n      const duration = 2.5\n\n      if (t < duration) {\n        // Eased progress: fast start, slow deceleration\n        const linear = t / duration\n        const eased = 1 - Math.pow(1 - linear, 3) // ease-out cubic\n\n        // Interpolate from spin base toward target rotation\n        groupRef.current.rotation.x = spinBase.current.x + (targetRotation.current.x - spinBase.current.x) * eased\n        groupRef.current.rotation.y = spinBase.current.y + (targetRotation.current.y - spinBase.current.y) * eased\n        groupRef.current.rotation.z = spinBase.current.z + (targetRotation.current.z - spinBase.current.z) * eased\n\n        // Bounce scale effect that settles\n        const bounce = 1 + Math.sin(t * 6) * 0.1 * (1 - linear)\n        groupRef.current.scale.setScalar(bounce)\n      } else {\n        isRolling.current = false\n        groupRef.current.scale.setScalar(1)\n        // Snap to exact final rotation\n        const q = new THREE.Quaternion().setFromEuler(targetRotation.current)\n        const finalEuler = new THREE.Euler().setFromQuaternion(q)\n        groupRef.current.rotation.set(finalEuler.x, finalEuler.y, finalEuler.z)\n      }\n    } else {\n      idleTime.current += delta\n      const t = idleTime.current\n      groupRef.current.rotation.x = Math.sin(t * 0.4) * 0.15\n      groupRef.current.rotation.y += delta * 0.3\n      groupRef.current.rotation.z = Math.cos(t * 0.3) * 0.1\n      groupRef.current.position.y = Math.sin(t * 0.8) * 0.05\n    }\n  })\n\n  // Offset text slightly above face surface\n  const textOffset = 0.06\n\n  return (\n    <group ref={groupRef}>\n      {/* Main colored mesh */}\n      <mesh ref={meshRef} castShadow>\n        <icosahedronGeometry args={[radius, 0]} />\n        <meshStandardMaterial vertexColors roughness={0.3} metalness={0.2} />\n      </mesh>\n\n      {/* Edge wireframe */}\n      <mesh>\n        <icosahedronGeometry args={[radius + 0.005, 0]} />\n        <meshBasicMaterial color=\"#1a0a20\" wireframe wireframeLinewidth={1} />\n      </mesh>\n\n      {/* Numbers 1-20 on each face */}\n      {faces.map((face, i) => {\n        const num = faceNumbers[i] ?? i + 1\n        const pos = face.center\n          .clone()\n          .add(face.normal.clone().multiplyScalar(textOffset))\n        const fontSize = num === 20 ? radius * 0.38 : radius * 0.3\n\n        // Convert quaternion to euler so we can pass as rotation prop\n        const euler = new THREE.Euler().setFromQuaternion(face.quaternion)\n\n        return (\n          <Text\n            key={i}\n            position={[pos.x, pos.y, pos.z]}\n            rotation={[euler.x, euler.y, euler.z]}\n            fontSize={fontSize}\n            fontWeight=\"bold\"\n            color=\"#f0e8d0\"\n            anchorX=\"center\"\n            anchorY=\"middle\"\n            font=\"/fonts/Geist-Bold.ttf\"\n            outlineWidth={0.025}\n            outlineColor=\"#000000\"\n          >\n            {String(num)}\n          </Text>\n        )\n      })}\n    </group>\n  )\n}\n\n/* ─── Rolling overlay: full screen 3D dice throw ─── */\nexport function DiceRollOverlay({ onFinish }: { onFinish: () => void }) {\n  const [phase, setPhase] = useState<\"rolling\" | \"done\">(\"rolling\")\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setPhase(\"done\")\n      onFinish()\n    }, 2600)\n    return () => clearTimeout(timer)\n  }, [onFinish])\n\n  return (\n    <div className=\"absolute inset-0 z-50 flex items-center justify-center\">\n      <div className=\"absolute inset-0 bg-foreground/70 backdrop-blur-md\" />\n\n      {phase === \"rolling\" && (\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n          {Array.from({ length: 24 }).map((_, i) => (\n            <div\n              key={i}\n              className=\"d20-spark\"\n              style={{\n                left: `${Math.random() * 100}%`,\n                top: `${Math.random() * 100}%`,\n                animationDelay: `${Math.random() * 2}s`,\n                animationDuration: `${1 + Math.random() * 1.5}s`,\n              }}\n            />\n          ))}\n        </div>\n      )}\n\n      <div className=\"relative z-10 w-[280px] h-[280px] d20-roll-glow\">\n        <Canvas\n          camera={{ position: [0, 0, 5], fov: 45 }}\n          gl={{ antialias: true, alpha: true }}\n          style={{ background: \"transparent\" }}\n        >\n          <ambientLight intensity={0.5} />\n          <directionalLight position={[3, 5, 4]} intensity={1.2} color=\"#ffeedd\" />\n          <directionalLight position={[-3, -2, 2]} intensity={0.4} color=\"#cc88ff\" />\n          <pointLight position={[0, 0, 3]} intensity={0.6} color=\"#ff6644\" />\n          <Suspense fallback={null}>\n            <D20Mesh rolling={true} radius={1.6} />\n            <Environment preset=\"studio\" />\n          </Suspense>\n        </Canvas>\n      </div>\n\n      {phase === \"rolling\" && (\n        <p\n          className=\"absolute bottom-[28%] text-lg font-semibold animate-pulse drop-shadow-lg z-20\"\n          style={{ color: \"oklch(0.95 0 0)\" }}\n        >\n          投掷中...\n        </p>\n      )}\n    </div>\n  )\n}\n\n/* ─── Small tab‑bar D20 dice with interaction ─── */\ninterface Dice3DProps {\n  onTap: () => void\n  onLongPress: () => void\n  isRolling: boolean\n}\n\nexport function Dice3D({ onTap, onLongPress, isRolling }: Dice3DProps) {\n  const [pressing, setPressing] = useState(false)\n  const [isLongPress, setIsLongPress] = useState(false)\n  const [webglOk, setWebglOk] = useState(true)\n  const pressTimerRef = useRef<NodeJS.Timeout | null>(null)\n  const startTimeRef = useRef<number>(0)\n\n  useEffect(() => {\n    try {\n      const canvas = document.createElement(\"canvas\")\n      const gl = canvas.getContext(\"webgl\") || canvas.getContext(\"experimental-webgl\")\n      setWebglOk(Boolean(gl))\n    } catch {\n      setWebglOk(false)\n    }\n  }, [])\n\n  const handlePointerDown = useCallback(() => {\n    startTimeRef.current = Date.now()\n    setPressing(true)\n    setIsLongPress(false)\n    pressTimerRef.current = setTimeout(() => {\n      setIsLongPress(true)\n      onLongPress()\n    }, 500)\n  }, [onLongPress])\n\n  const handlePointerUp = useCallback(() => {\n    setPressing(false)\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current)\n      pressTimerRef.current = null\n    }\n    const elapsed = Date.now() - startTimeRef.current\n    if (elapsed < 500 && !isLongPress && !isRolling) {\n      onTap()\n    }\n  }, [isLongPress, isRolling, onTap])\n\n  const handlePointerCancel = useCallback(() => {\n    setPressing(false)\n    if (pressTimerRef.current) {\n      clearTimeout(pressTimerRef.current)\n      pressTimerRef.current = null\n    }\n  }, [])\n\n  return (\n    <div className=\"relative flex items-center justify-center\">\n      <div\n        className={`absolute rounded-full transition-all duration-300 ${\n          pressing\n            ? \"w-16 h-16 blur-lg\"\n            : isRolling\n              ? \"w-14 h-14 blur-md animate-pulse\"\n              : \"w-12 h-12 blur-sm\"\n        }`}\n        style={{\n          background: pressing\n            ? \"oklch(0.5 0.2 320 / 0.5)\"\n            : isRolling\n              ? \"oklch(0.5 0.2 320 / 0.4)\"\n              : \"oklch(0.5 0.15 320 / 0.15)\",\n        }}\n      />\n\n      {pressing && !isRolling && (\n        <svg className=\"absolute w-14 h-14 -rotate-90\" viewBox=\"0 0 56 56\">\n          <circle\n            cx=\"28\" cy=\"28\" r=\"24\"\n            fill=\"none\"\n            stroke=\"oklch(0.5 0.22 320)\"\n            strokeWidth=\"2.5\"\n            strokeDasharray={`${2 * Math.PI * 24}`}\n            strokeDashoffset={`${2 * Math.PI * 24}`}\n            strokeLinecap=\"round\"\n            style={{ animation: \"progress-ring 500ms ease-out forwards\" }}\n          />\n        </svg>\n      )}\n\n      <div\n        className=\"relative z-10 cursor-pointer select-none touch-none\"\n        style={{ width: 48, height: 48 }}\n        onPointerDown={handlePointerDown}\n        onPointerUp={handlePointerUp}\n        onPointerLeave={handlePointerCancel}\n        onPointerCancel={handlePointerCancel}\n      >\n        {webglOk ? (\n          <Canvas\n            camera={{ position: [0, 0, 4.5], fov: 35 }}\n            gl={{ antialias: true, alpha: true }}\n            style={{\n              background: \"transparent\",\n              pointerEvents: \"none\",\n              transform: pressing ? \"scale(0.85)\" : \"scale(1)\",\n              transition: \"transform 0.15s ease\",\n            }}\n          >\n            <ambientLight intensity={0.6} />\n            <directionalLight position={[2, 3, 4]} intensity={1} color=\"#ffeedd\" />\n            <directionalLight position={[-2, -1, 2]} intensity={0.3} color=\"#cc88ff\" />\n            <Suspense fallback={null}>\n              <D20Mesh rolling={false} />\n            </Suspense>\n          </Canvas>\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center\">\n            <span className=\"text-xl\">🎲</span>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6381, "column": 0}, "map": {"version":3,"sources":["file:///D:/yueD_GEEKDAY/frontend/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useMemo, useCallback } from \"react\"\nimport type { Restaurant, RestaurantList } from \"@/types/restaurant\"\nimport {\n  getLists,\n  saveLists, // Import saveLists to update local storage\n  createList,\n  addRestaurant,\n  updateRestaurant,\n  deleteRestaurant,\n  deleteList,\n} from \"@/lib/storage\"\nimport type { FilterOptions } from \"@/components/filter-panel\"\nimport { Map, List, User, Loader2 } from \"lucide-react\" // Add Loader2\nimport { MobileMapView } from \"@/components/mobile-map-view\"\nimport { MobileRestaurantList } from \"@/components/mobile-restaurant-list\"\nimport { MobileAddRestaurant } from \"@/components/mobile-add-restaurant\"\nimport { MobileRandomPicker } from \"@/components/mobile-random-picker\"\nimport { MobileProfile } from \"@/components/mobile-profile\"\nimport { MobileAIChat } from \"@/components/mobile-ai-chat\"\nimport { Dice3D, DiceRollOverlay } from \"@/components/dice-3d\"\nimport confetti from \"canvas-confetti\"\n\ntype TabType = \"map\" | \"list\" | \"add\" | \"random\" | \"profile\" | \"ai-chat\"\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001'\n\nexport default function HomePage() {\n  const [lists, setLists] = useState<RestaurantList[]>([])\n  const [currentListId, setCurrentListId] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<TabType>(\"map\")\n  const [prevTab, setPrevTab] = useState<TabType>(\"map\")\n  const [filters, setFilters] = useState<FilterOptions>({\n    priceRange: [0, 500],\n    tags: [],\n    searchText: \"\",\n  })\n  const [aiFilteredIds, setAiFilteredIds] = useState<string[] | null>(null)\n  const [aiFilterExplanation, setAiFilterExplanation] = useState<string>(\"\")\n  const [isDiceRolling, setIsDiceRolling] = useState(false)\n  const [showDiceResult, setShowDiceResult] = useState(false)\n  const [diceResult, setDiceResult] = useState<Restaurant | null>(null)\n  const [isSyncing, setIsSyncing] = useState(false) // Sync status\n\n  // 1. Initial Load & URL Handling (Join Room)\n  useEffect(() => {\n    const initData = async () => {\n      let storedLists = getLists()\n      \n      // Check URL parameters for join action\n      if (typeof window !== 'undefined') {\n        const urlParams = new URLSearchParams(window.location.search)\n        const joinListId = urlParams.get('listId')\n        const action = urlParams.get('action')\n        \n        if (joinListId && action === 'join') {\n           try {\n             setIsSyncing(true)\n             // Fetch the shared list from backend\n             const res = await fetch(`${API_URL}/api/lists/${joinListId}`)\n             if (res.ok) {\n               const sharedList = await res.json()\n               \n               // Merge into local storage\n               const existingIndex = storedLists.findIndex(l => l.id === sharedList.id)\n               if (existingIndex >= 0) {\n                 storedLists[existingIndex] = sharedList\n               } else {\n                 storedLists.push(sharedList)\n               }\n               \n               saveLists(storedLists)\n               setLists(storedLists)\n               setCurrentListId(sharedList.id)\n               setActiveTab(\"list\") // Go to list view to see shared content\n               \n               // Clean URL\n               window.history.replaceState({}, '', '/')\n               alert(`成功加入协作列表：${sharedList.name}`)\n             }\n           } catch (e) {\n             console.error(\"Join list failed\", e)\n             alert(\"加入列表失败，请检查网络或链接是否正确\")\n           } finally {\n             setIsSyncing(false)\n           }\n           return // Stop here, don't load default mock data if joining\n        }\n      }\n\n      if (storedLists.length === 0) {\n        try {\n          const res = await fetch('/api/restaurants')\n          if (!res.ok) throw new Error('Failed to fetch')\n          const data: Restaurant[] = await res.json()\n          \n          const defaultList = createList(\"我的收藏\")\n          data.forEach((restaurant) => {\n            // Remove id and createdAt from API response to let addRestaurant generate new ones\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { id, createdAt, ...rest } = restaurant\n            addRestaurant(defaultList.id, rest)\n          })\n          storedLists = getLists()\n        } catch (error) {\n          console.error(\"Failed to load initial data:\", error)\n        }\n      }\n      setLists(storedLists)\n      setCurrentListId(storedLists[0]?.id || null)\n    }\n\n    initData()\n  }, [])\n\n  // 2. Sync Effect (Polling)\n  // Poll backend every 2 seconds if we are on a list\n  useEffect(() => {\n    if (!currentListId) return\n    \n    const interval = setInterval(async () => {\n        try {\n            // Only sync if we have a backend (hackathon mode)\n            // Ideally check if this list is \"shared\" or just sync everything\n            const res = await fetch(`${API_URL}/api/lists/${currentListId}`)\n            if (res.ok) {\n                const remoteList = await res.json()\n                \n                // Compare timestamps or just dumb overwrite for now\n                // Ideally backend should handle \"last modified\" logic\n                // Here we just update local state if remote has more items or changed name\n                // Simple hack: just overwrite local list in state (and storage)\n                \n                // Update lists state\n                setLists(prev => {\n                    const next = [...prev]\n                    const idx = next.findIndex(l => l.id === remoteList.id)\n                    if (idx >= 0) {\n                        // Only update if content is different (simple check)\n                        if (JSON.stringify(next[idx].restaurants) !== JSON.stringify(remoteList.restaurants)) {\n                             next[idx] = remoteList\n                             saveLists(next) // Persist\n                             return next\n                        }\n                    }\n                    return prev\n                })\n            }\n        } catch (e) {\n            // Backend might be down or list not on backend yet\n        }\n    }, 2000)\n    \n    return () => clearInterval(interval)\n  }, [currentListId])\n\n  // Helper to sync specific list to backend\n  const syncToBackend = async (list: RestaurantList) => {\n      try {\n          await fetch(`${API_URL}/api/lists`, {\n              method: 'POST',\n              headers: { 'Content-Type': 'application/json' },\n              body: JSON.stringify(list)\n          })\n      } catch (e) {\n          console.error(\"Sync failed\", e)\n      }\n  }\n\n  const currentList = lists.find((l) => l.id === currentListId)\n  const restaurants = currentList?.restaurants || []\n\n  const filteredRestaurants = useMemo(() => {\n    return restaurants.filter((r) => {\n      if (r.avgPrice < filters.priceRange[0] || r.avgPrice > filters.priceRange[1]) return false\n      if (filters.tags.length > 0 && !filters.tags.some((tag) => r.tags.includes(tag))) return false\n      if (filters.searchText) {\n        const search = filters.searchText.toLowerCase()\n        return (\n          r.name.toLowerCase().includes(search) || r.address.toLowerCase().includes(search)\n        )\n      }\n      return true\n    })\n  }, [restaurants, filters])\n\n  const handleCreateList = (name: string) => {\n    const newList = createList(name)\n    setLists(getLists())\n    setCurrentListId(newList.id)\n    \n    // Sync creation\n    syncToBackend(newList)\n  }\n\n  const handleDeleteList = (id: string) => {\n    deleteList(id)\n    const updatedLists = getLists()\n    setLists(updatedLists)\n    setCurrentListId(updatedLists[0]?.id || null)\n  }\n\n  const handleAddRestaurant = (restaurant: Omit<Restaurant, \"id\" | \"createdAt\">, listId?: string) => {\n    const targetListId = listId || currentListId\n    if (targetListId) {\n      addRestaurant(targetListId, restaurant)\n      \n      const newLists = getLists()\n      setLists(newLists)\n      setCurrentListId(targetListId)\n      setActiveTab(\"list\")\n      \n      // Sync update\n      const updatedList = newLists.find(l => l.id === targetListId)\n      if (updatedList) syncToBackend(updatedList)\n    }\n  }\n\n  const handleToggleExclude = (restaurantId: string) => {\n    if (currentListId) {\n      const restaurant = restaurants.find((r) => r.id === restaurantId)\n      if (restaurant) {\n        updateRestaurant(currentListId, restaurantId, { excluded: !restaurant.excluded })\n        \n        const newLists = getLists()\n        setLists(newLists)\n        \n        // Sync update\n        const updatedList = newLists.find(l => l.id === currentListId)\n        if (updatedList) syncToBackend(updatedList)\n      }\n    }\n  }\n\n  const handleDeleteRestaurant = (restaurantId: string) => {\n    if (currentListId) {\n      deleteRestaurant(currentListId, restaurantId)\n      \n      const newLists = getLists()\n      setLists(newLists)\n      \n      // Sync update\n      const updatedList = newLists.find(l => l.id === currentListId)\n      if (updatedList) syncToBackend(updatedList)\n    }\n  }\n\n  const handleAIFilter = (ids: string[] | null, explanation?: string) => {\n    setAiFilteredIds(ids)\n    setAiFilterExplanation(explanation || \"\")\n  }\n\n  const handleChangeTab = (tab: TabType) => {\n    if (tab === activeTab) return\n    setPrevTab(activeTab)\n    setActiveTab(tab)\n  }\n\n  // Dice long press: start 3D rolling animation\n  const handleDiceLongPress = useCallback(() => {\n    const available = filteredRestaurants.filter((r) => !r.excluded)\n    if (available.length === 0) return\n    setIsDiceRolling(true)\n    setShowDiceResult(false)\n    setDiceResult(null)\n  }, [filteredRestaurants])\n\n  // Dice tap: go to AI chat\n  const handleDiceTap = useCallback(() => {\n    handleChangeTab(\"ai-chat\")\n  }, [])\n\n  const tabs = [\n    { id: \"map\" as const, icon: Map, label: \"地图\" },\n    { id: \"list\" as const, icon: List, label: \"列表\" },\n    { id: \"dice\" as const, icon: null, label: \"骰子\" },\n    { id: \"add\" as const, icon: null, label: \"添加\" },\n    { id: \"profile\" as const, icon: User, label: \"我的\" },\n  ]\n\n  const showBottomBar = activeTab !== \"ai-chat\"\n\n  return (\n    <div className=\"mx-auto max-w-[430px] h-screen bg-background flex flex-col relative shadow-2xl overflow-hidden\">\n      {/* Main content */}\n      <main className=\"flex-1 overflow-hidden\">\n        {activeTab === \"map\" && (\n          <MobileMapView\n            restaurants={filteredRestaurants}\n            onToggleExclude={handleToggleExclude}\n            lists={lists}\n            currentListId={currentListId}\n            onSelectList={setCurrentListId}\n          />\n        )}\n        {activeTab === \"list\" && (\n          <MobileRestaurantList\n            restaurants={filteredRestaurants}\n            allRestaurants={restaurants}\n            filters={filters}\n            onFiltersChange={setFilters}\n            onToggleExclude={handleToggleExclude}\n            onDelete={handleDeleteRestaurant}\n            lists={lists}\n            currentListId={currentListId}\n            onSelectList={setCurrentListId}\n            onCreateList={handleCreateList}\n          />\n        )}\n        {activeTab === \"add\" && (\n          <MobileAddRestaurant\n            onAdd={handleAddRestaurant}\n            lists={lists}\n            currentListId={currentListId}\n          />\n        )}\n        {activeTab === \"random\" && (\n          <MobileRandomPicker restaurants={filteredRestaurants} />\n        )}\n        {activeTab === \"profile\" && (\n          <MobileProfile\n            lists={lists}\n            currentListId={currentListId}\n            onSelectList={setCurrentListId}\n            onCreateList={handleCreateList}\n            onDeleteList={handleDeleteList}\n            currentList={currentList}\n          />\n        )}\n        {activeTab === \"ai-chat\" && (\n          <MobileAIChat\n            restaurants={restaurants}\n            onBack={() => handleChangeTab(prevTab)}\n          />\n        )}\n      </main>\n\n      {/* 3D Dice rolling overlay */}\n      {isDiceRolling && (\n        <DiceRollOverlay\n          onFinish={() => {\n            const available = filteredRestaurants.filter((r) => !r.excluded)\n            if (available.length > 0) {\n              const picked = available[Math.floor(Math.random() * available.length)]\n              setDiceResult(picked)\n              setShowDiceResult(true)\n              confetti({ particleCount: 120, spread: 80, origin: { y: 0.7 } })\n            }\n            setIsDiceRolling(false)\n          }}\n        />\n      )}\n\n      {/* Result card overlay */}\n      {showDiceResult && diceResult && (\n        <div\n          className=\"absolute inset-0 z-50 flex items-center justify-center\"\n          onClick={() => {\n            setShowDiceResult(false)\n            setDiceResult(null)\n          }}\n        >\n          <div className=\"absolute inset-0 bg-foreground/50 backdrop-blur-md\" />\n          <div className=\"relative z-10 flex flex-col items-center gap-4 px-6\">\n            <div className=\"animate-in zoom-in-75 fade-in duration-500 w-full max-w-sm\">\n              <div className=\"rounded-3xl overflow-hidden bg-card border-2 border-primary shadow-2xl\">\n                <div className=\"h-44 relative\">\n                  <img\n                    src={\n                      diceResult.imageUrl ||\n                      `/placeholder.svg?height=200&width=400&query=${encodeURIComponent(diceResult.name)}`\n                    }\n                    alt={diceResult.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-card to-transparent\" />\n                  <div className=\"absolute top-3 right-3 px-3 py-1 rounded-full bg-primary text-primary-foreground text-sm font-bold shadow-lg\">\n                    就是这家!\n                  </div>\n                </div>\n                <div className=\"p-5 -mt-8 relative\">\n                  <h3 className=\"font-bold text-2xl\">{diceResult.name}</h3>\n                  {diceResult.tags.length > 0 && (\n                    <div className=\"flex gap-1.5 mt-2 flex-wrap\">\n                      {diceResult.tags.map((tag) => (\n                        <span\n                          key={tag}\n                          className=\"px-2 py-0.5 text-xs rounded-full bg-primary/15 text-primary font-medium\"\n                        >\n                          {tag}\n                        </span>\n                      ))}\n                    </div>\n                  )}\n                  <div className=\"flex items-center gap-3 mt-3\">\n                    <span className=\"text-primary font-bold text-lg\">\n                      ¥{diceResult.avgPrice}/人\n                    </span>\n                    {diceResult.rating && (\n                      <span className=\"flex items-center gap-1 text-amber-500 text-sm\">\n                        <svg className=\"w-4 h-4 fill-current\" viewBox=\"0 0 24 24\">\n                          <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\n                        </svg>\n                        {diceResult.rating}\n                      </span>\n                    )}\n                  </div>\n                  <p className=\"text-sm text-muted-foreground mt-2 truncate\">\n                    {diceResult.address}\n                  </p>\n                  {diceResult.dishes.length > 0 && (\n                    <div className=\"mt-3 pt-3 border-t border-border\">\n                      <div className=\"flex flex-wrap gap-1.5\">\n                        {diceResult.dishes.slice(0, 4).map((d) => (\n                          <span\n                            key={d}\n                            className=\"px-2 py-1 bg-muted rounded-lg text-xs\"\n                          >\n                            {d}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n              <p className=\"text-center text-sm mt-4 drop-shadow\" style={{ color: \"oklch(0.95 0 0)\" }}>\n                点击任意位置关闭\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Glass bottom tab bar */}\n      {showBottomBar && (\n        <nav className=\"flex-shrink-0 relative\">\n          {/* Glass background */}\n          <div className=\"absolute inset-0 glass-tab-bar\" />\n\n          <div className=\"relative flex items-end justify-around h-20 pb-safe px-2\">\n            {/* Map tab */}\n            <button\n              onClick={() => handleChangeTab(\"map\")}\n              className={`tab-item flex flex-col items-center justify-center w-16 pb-2 pt-3 transition-all duration-300 ${\n                activeTab === \"map\" ? \"tab-active\" : \"\"\n              }`}\n            >\n              <Map\n                className={`w-6 h-6 transition-all duration-300 ${\n                  activeTab === \"map\"\n                    ? \"text-primary stroke-[2.5px] scale-110\"\n                    : \"text-muted-foreground\"\n                }`}\n              />\n              <span\n                className={`text-[10px] mt-1 transition-all duration-300 ${\n                  activeTab === \"map\"\n                    ? \"text-primary font-semibold\"\n                    : \"text-muted-foreground\"\n                }`}\n              >\n                地图\n              </span>\n            </button>\n\n            {/* List tab */}\n            <button\n              onClick={() => handleChangeTab(\"list\")}\n              className={`tab-item flex flex-col items-center justify-center w-16 pb-2 pt-3 transition-all duration-300 ${\n                activeTab === \"list\" ? \"tab-active\" : \"\"\n              }`}\n            >\n              <List\n                className={`w-6 h-6 transition-all duration-300 ${\n                  activeTab === \"list\"\n                    ? \"text-primary stroke-[2.5px] scale-110\"\n                    : \"text-muted-foreground\"\n                }`}\n              />\n              <span\n                className={`text-[10px] mt-1 transition-all duration-300 ${\n                  activeTab === \"list\"\n                    ? \"text-primary font-semibold\"\n                    : \"text-muted-foreground\"\n                }`}\n              >\n                列表\n              </span>\n            </button>\n\n            {/* Center Dice button */}\n            <div className=\"flex flex-col items-center -mt-5 relative z-10\">\n              <div className=\"w-[60px] h-[60px] rounded-full glass-dice-bg flex items-center justify-center shadow-lg\">\n                <Dice3D\n                  onTap={handleDiceTap}\n                  onLongPress={handleDiceLongPress}\n                  isRolling={isDiceRolling}\n                />\n              </div>\n              <span className=\"text-[10px] mt-1 text-muted-foreground\">骰子</span>\n            </div>\n\n            {/* Add tab */}\n            <button\n              onClick={() => handleChangeTab(\"add\")}\n              className={`tab-item flex flex-col items-center justify-center w-16 pb-2 pt-3 transition-all duration-300 ${\n                activeTab === \"add\" ? \"tab-active\" : \"\"\n              }`}\n            >\n              <svg\n                className={`w-6 h-6 transition-all duration-300 ${\n                  activeTab === \"add\"\n                    ? \"text-primary scale-110\"\n                    : \"text-muted-foreground\"\n                }`}\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={activeTab === \"add\" ? 2.5 : 2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n              >\n                <path d=\"M12 5v14M5 12h14\" />\n              </svg>\n              <span\n                className={`text-[10px] mt-1 transition-all duration-300 ${\n                  activeTab === \"add\"\n                    ? \"text-primary font-semibold\"\n                    : \"text-muted-foreground\"\n                }`}\n              >\n                添加\n              </span>\n            </button>\n\n            {/* Profile tab */}\n            <button\n              onClick={() => handleChangeTab(\"profile\")}\n              className={`tab-item flex flex-col items-center justify-center w-16 pb-2 pt-3 transition-all duration-300 ${\n                activeTab === \"profile\" ? \"tab-active\" : \"\"\n              }`}\n            >\n              <User\n                className={`w-6 h-6 transition-all duration-300 ${\n                  activeTab === \"profile\"\n                    ? \"text-primary stroke-[2.5px] scale-110\"\n                    : \"text-muted-foreground\"\n                }`}\n              />\n              <span\n                className={`text-[10px] mt-1 transition-all duration-300 ${\n                  activeTab === \"profile\"\n                    ? \"text-primary font-semibold\"\n                    : \"text-muted-foreground\"\n                }`}\n              >\n                我的\n              </span>\n            </button>\n          </div>\n        </nav>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}